using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml;
using System.Xml.Serialization;
using Helpers;
using TaleWorlds.CampaignSystem.Actions;
using TaleWorlds.CampaignSystem.CharacterDevelopment;
using TaleWorlds.CampaignSystem.Extensions;
using TaleWorlds.CampaignSystem.Issues;
using TaleWorlds.CampaignSystem.LogEntries;
using TaleWorlds.CampaignSystem.Map;
using TaleWorlds.CampaignSystem.Party;
using TaleWorlds.CampaignSystem.Party.PartyComponents;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.CampaignSystem.Settlements.Workshops;
using TaleWorlds.Core;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.ObjectSystem;
using TaleWorlds.SaveSystem;
using TaleWorlds.SaveSystem.Load;

namespace TaleWorlds.CampaignSystem
{
	// Token: 0x02000067 RID: 103
	public sealed class Hero : MBObjectBase, ITrackableCampaignObject, ITrackableBase, IRandomOwner
	{
		// Token: 0x06000C92 RID: 3218 RVA: 0x00043F50 File Offset: 0x00042150
		internal static void AutoGeneratedStaticCollectObjectsHero(object o, List<object> collectedObjects)
		{
			((Hero)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06000C93 RID: 3219 RVA: 0x00043F60 File Offset: 0x00042160
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.VolunteerTypes);
			collectedObjects.Add(this.Culture);
			collectedObjects.Add(this.SpecialItems);
			collectedObjects.Add(this._characterObject);
			collectedObjects.Add(this._firstName);
			collectedObjects.Add(this._name);
			collectedObjects.Add(this._heroTraits);
			collectedObjects.Add(this._heroPerks);
			collectedObjects.Add(this._heroSkills);
			collectedObjects.Add(this._characterAttributes);
			collectedObjects.Add(this._companionOf);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this._birthDay, collectedObjects);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this._deathDay, collectedObjects);
			collectedObjects.Add(this._clan);
			collectedObjects.Add(this._supporterOf);
			collectedObjects.Add(this._governorOf);
			collectedObjects.Add(this._ownedWorkshops);
			collectedObjects.Add(this._partyBelongedTo);
			collectedObjects.Add(this._stayingInSettlement);
			collectedObjects.Add(this._bornSettlement);
			collectedObjects.Add(this._father);
			collectedObjects.Add(this._mother);
			collectedObjects.Add(this._exSpouses);
			collectedObjects.Add(this._spouse);
			collectedObjects.Add(this._children);
			collectedObjects.Add(this._heroDeveloper);
			StaticBodyProperties.AutoGeneratedStaticCollectObjectsStaticBodyProperties(this.StaticBodyProperties, collectedObjects);
			collectedObjects.Add(this.EncyclopediaText);
			collectedObjects.Add(this._battleEquipment);
			collectedObjects.Add(this._civilianEquipment);
			collectedObjects.Add(this._stealthEquipment);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.CaptivityStartTime, collectedObjects);
			collectedObjects.Add(this.DeathMarkKillerHero);
			collectedObjects.Add(this.LastKnownClosestSettlement);
			collectedObjects.Add(this.PartyBelongedToAsPrisoner);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.LastMeetingTimeWithPlayer, collectedObjects);
		}

		// Token: 0x06000C94 RID: 3220 RVA: 0x0004413D File Offset: 0x0004233D
		internal static object AutoGeneratedGetMemberValueStaticBodyProperties(object o)
		{
			return ((Hero)o).StaticBodyProperties;
		}

		// Token: 0x06000C95 RID: 3221 RVA: 0x0004414F File Offset: 0x0004234F
		internal static object AutoGeneratedGetMemberValueWeight(object o)
		{
			return ((Hero)o).Weight;
		}

		// Token: 0x06000C96 RID: 3222 RVA: 0x00044161 File Offset: 0x00042361
		internal static object AutoGeneratedGetMemberValueBuild(object o)
		{
			return ((Hero)o).Build;
		}

		// Token: 0x06000C97 RID: 3223 RVA: 0x00044173 File Offset: 0x00042373
		internal static object AutoGeneratedGetMemberValueEncyclopediaText(object o)
		{
			return ((Hero)o).EncyclopediaText;
		}

		// Token: 0x06000C98 RID: 3224 RVA: 0x00044180 File Offset: 0x00042380
		internal static object AutoGeneratedGetMemberValueIsFemale(object o)
		{
			return ((Hero)o).IsFemale;
		}

		// Token: 0x06000C99 RID: 3225 RVA: 0x00044192 File Offset: 0x00042392
		internal static object AutoGeneratedGetMemberValue_battleEquipment(object o)
		{
			return ((Hero)o)._battleEquipment;
		}

		// Token: 0x06000C9A RID: 3226 RVA: 0x0004419F File Offset: 0x0004239F
		internal static object AutoGeneratedGetMemberValue_civilianEquipment(object o)
		{
			return ((Hero)o)._civilianEquipment;
		}

		// Token: 0x06000C9B RID: 3227 RVA: 0x000441AC File Offset: 0x000423AC
		internal static object AutoGeneratedGetMemberValue_stealthEquipment(object o)
		{
			return ((Hero)o)._stealthEquipment;
		}

		// Token: 0x06000C9C RID: 3228 RVA: 0x000441B9 File Offset: 0x000423B9
		internal static object AutoGeneratedGetMemberValueCaptivityStartTime(object o)
		{
			return ((Hero)o).CaptivityStartTime;
		}

		// Token: 0x06000C9D RID: 3229 RVA: 0x000441CB File Offset: 0x000423CB
		internal static object AutoGeneratedGetMemberValuePreferredUpgradeFormation(object o)
		{
			return ((Hero)o).PreferredUpgradeFormation;
		}

		// Token: 0x06000C9E RID: 3230 RVA: 0x000441DD File Offset: 0x000423DD
		internal static object AutoGeneratedGetMemberValueIsMinorFactionHero(object o)
		{
			return ((Hero)o).IsMinorFactionHero;
		}

		// Token: 0x06000C9F RID: 3231 RVA: 0x000441EF File Offset: 0x000423EF
		internal static object AutoGeneratedGetMemberValueOccupation(object o)
		{
			return ((Hero)o).Occupation;
		}

		// Token: 0x06000CA0 RID: 3232 RVA: 0x00044201 File Offset: 0x00042401
		internal static object AutoGeneratedGetMemberValueDeathMark(object o)
		{
			return ((Hero)o).DeathMark;
		}

		// Token: 0x06000CA1 RID: 3233 RVA: 0x00044213 File Offset: 0x00042413
		internal static object AutoGeneratedGetMemberValueDeathMarkKillerHero(object o)
		{
			return ((Hero)o).DeathMarkKillerHero;
		}

		// Token: 0x06000CA2 RID: 3234 RVA: 0x00044220 File Offset: 0x00042420
		internal static object AutoGeneratedGetMemberValueLastKnownClosestSettlement(object o)
		{
			return ((Hero)o).LastKnownClosestSettlement;
		}

		// Token: 0x06000CA3 RID: 3235 RVA: 0x0004422D File Offset: 0x0004242D
		internal static object AutoGeneratedGetMemberValueLastExaminedLogEntryID(object o)
		{
			return ((Hero)o).LastExaminedLogEntryID;
		}

		// Token: 0x06000CA4 RID: 3236 RVA: 0x0004423F File Offset: 0x0004243F
		internal static object AutoGeneratedGetMemberValuePartyBelongedToAsPrisoner(object o)
		{
			return ((Hero)o).PartyBelongedToAsPrisoner;
		}

		// Token: 0x06000CA5 RID: 3237 RVA: 0x0004424C File Offset: 0x0004244C
		internal static object AutoGeneratedGetMemberValueLastMeetingTimeWithPlayer(object o)
		{
			return ((Hero)o).LastMeetingTimeWithPlayer;
		}

		// Token: 0x06000CA6 RID: 3238 RVA: 0x0004425E File Offset: 0x0004245E
		internal static object AutoGeneratedGetMemberValueRandomValue(object o)
		{
			return ((Hero)o).RandomValue;
		}

		// Token: 0x06000CA7 RID: 3239 RVA: 0x00044270 File Offset: 0x00042470
		internal static object AutoGeneratedGetMemberValueLastTimeStampForActivity(object o)
		{
			return ((Hero)o).LastTimeStampForActivity;
		}

		// Token: 0x06000CA8 RID: 3240 RVA: 0x00044282 File Offset: 0x00042482
		internal static object AutoGeneratedGetMemberValueVolunteerTypes(object o)
		{
			return ((Hero)o).VolunteerTypes;
		}

		// Token: 0x06000CA9 RID: 3241 RVA: 0x0004428F File Offset: 0x0004248F
		internal static object AutoGeneratedGetMemberValueLevel(object o)
		{
			return ((Hero)o).Level;
		}

		// Token: 0x06000CAA RID: 3242 RVA: 0x000442A1 File Offset: 0x000424A1
		internal static object AutoGeneratedGetMemberValueHiddenInEncyclopedia(object o)
		{
			return ((Hero)o).HiddenInEncyclopedia;
		}

		// Token: 0x06000CAB RID: 3243 RVA: 0x000442B3 File Offset: 0x000424B3
		internal static object AutoGeneratedGetMemberValueCulture(object o)
		{
			return ((Hero)o).Culture;
		}

		// Token: 0x06000CAC RID: 3244 RVA: 0x000442C0 File Offset: 0x000424C0
		internal static object AutoGeneratedGetMemberValueSpecialItems(object o)
		{
			return ((Hero)o).SpecialItems;
		}

		// Token: 0x06000CAD RID: 3245 RVA: 0x000442CD File Offset: 0x000424CD
		internal static object AutoGeneratedGetMemberValueIsPregnant(object o)
		{
			return ((Hero)o).IsPregnant;
		}

		// Token: 0x06000CAE RID: 3246 RVA: 0x000442DF File Offset: 0x000424DF
		internal static object AutoGeneratedGetMemberValue_passedTimeAtHomeSettlement(object o)
		{
			return ((Hero)o)._passedTimeAtHomeSettlement;
		}

		// Token: 0x06000CAF RID: 3247 RVA: 0x000442F1 File Offset: 0x000424F1
		internal static object AutoGeneratedGetMemberValue_characterObject(object o)
		{
			return ((Hero)o)._characterObject;
		}

		// Token: 0x06000CB0 RID: 3248 RVA: 0x000442FE File Offset: 0x000424FE
		internal static object AutoGeneratedGetMemberValue_firstName(object o)
		{
			return ((Hero)o)._firstName;
		}

		// Token: 0x06000CB1 RID: 3249 RVA: 0x0004430B File Offset: 0x0004250B
		internal static object AutoGeneratedGetMemberValue_name(object o)
		{
			return ((Hero)o)._name;
		}

		// Token: 0x06000CB2 RID: 3250 RVA: 0x00044318 File Offset: 0x00042518
		internal static object AutoGeneratedGetMemberValue_heroState(object o)
		{
			return ((Hero)o)._heroState;
		}

		// Token: 0x06000CB3 RID: 3251 RVA: 0x0004432A File Offset: 0x0004252A
		internal static object AutoGeneratedGetMemberValue_heroTraits(object o)
		{
			return ((Hero)o)._heroTraits;
		}

		// Token: 0x06000CB4 RID: 3252 RVA: 0x00044337 File Offset: 0x00042537
		internal static object AutoGeneratedGetMemberValue_heroPerks(object o)
		{
			return ((Hero)o)._heroPerks;
		}

		// Token: 0x06000CB5 RID: 3253 RVA: 0x00044344 File Offset: 0x00042544
		internal static object AutoGeneratedGetMemberValue_heroSkills(object o)
		{
			return ((Hero)o)._heroSkills;
		}

		// Token: 0x06000CB6 RID: 3254 RVA: 0x00044351 File Offset: 0x00042551
		internal static object AutoGeneratedGetMemberValue_characterAttributes(object o)
		{
			return ((Hero)o)._characterAttributes;
		}

		// Token: 0x06000CB7 RID: 3255 RVA: 0x0004435E File Offset: 0x0004255E
		internal static object AutoGeneratedGetMemberValue_companionOf(object o)
		{
			return ((Hero)o)._companionOf;
		}

		// Token: 0x06000CB8 RID: 3256 RVA: 0x0004436B File Offset: 0x0004256B
		internal static object AutoGeneratedGetMemberValue_health(object o)
		{
			return ((Hero)o)._health;
		}

		// Token: 0x06000CB9 RID: 3257 RVA: 0x0004437D File Offset: 0x0004257D
		internal static object AutoGeneratedGetMemberValue_defaultAge(object o)
		{
			return ((Hero)o)._defaultAge;
		}

		// Token: 0x06000CBA RID: 3258 RVA: 0x0004438F File Offset: 0x0004258F
		internal static object AutoGeneratedGetMemberValue_birthDay(object o)
		{
			return ((Hero)o)._birthDay;
		}

		// Token: 0x06000CBB RID: 3259 RVA: 0x000443A1 File Offset: 0x000425A1
		internal static object AutoGeneratedGetMemberValue_deathDay(object o)
		{
			return ((Hero)o)._deathDay;
		}

		// Token: 0x06000CBC RID: 3260 RVA: 0x000443B3 File Offset: 0x000425B3
		internal static object AutoGeneratedGetMemberValue_power(object o)
		{
			return ((Hero)o)._power;
		}

		// Token: 0x06000CBD RID: 3261 RVA: 0x000443C5 File Offset: 0x000425C5
		internal static object AutoGeneratedGetMemberValue_clan(object o)
		{
			return ((Hero)o)._clan;
		}

		// Token: 0x06000CBE RID: 3262 RVA: 0x000443D2 File Offset: 0x000425D2
		internal static object AutoGeneratedGetMemberValue_supporterOf(object o)
		{
			return ((Hero)o)._supporterOf;
		}

		// Token: 0x06000CBF RID: 3263 RVA: 0x000443DF File Offset: 0x000425DF
		internal static object AutoGeneratedGetMemberValue_governorOf(object o)
		{
			return ((Hero)o)._governorOf;
		}

		// Token: 0x06000CC0 RID: 3264 RVA: 0x000443EC File Offset: 0x000425EC
		internal static object AutoGeneratedGetMemberValue_ownedWorkshops(object o)
		{
			return ((Hero)o)._ownedWorkshops;
		}

		// Token: 0x06000CC1 RID: 3265 RVA: 0x000443F9 File Offset: 0x000425F9
		internal static object AutoGeneratedGetMemberValue_partyBelongedTo(object o)
		{
			return ((Hero)o)._partyBelongedTo;
		}

		// Token: 0x06000CC2 RID: 3266 RVA: 0x00044406 File Offset: 0x00042606
		internal static object AutoGeneratedGetMemberValue_stayingInSettlement(object o)
		{
			return ((Hero)o)._stayingInSettlement;
		}

		// Token: 0x06000CC3 RID: 3267 RVA: 0x00044413 File Offset: 0x00042613
		internal static object AutoGeneratedGetMemberValue_isKnownToPlayer(object o)
		{
			return ((Hero)o)._isKnownToPlayer;
		}

		// Token: 0x06000CC4 RID: 3268 RVA: 0x00044425 File Offset: 0x00042625
		internal static object AutoGeneratedGetMemberValue_hasMet(object o)
		{
			return ((Hero)o)._hasMet;
		}

		// Token: 0x06000CC5 RID: 3269 RVA: 0x00044437 File Offset: 0x00042637
		internal static object AutoGeneratedGetMemberValue_bornSettlement(object o)
		{
			return ((Hero)o)._bornSettlement;
		}

		// Token: 0x06000CC6 RID: 3270 RVA: 0x00044444 File Offset: 0x00042644
		internal static object AutoGeneratedGetMemberValue_gold(object o)
		{
			return ((Hero)o)._gold;
		}

		// Token: 0x06000CC7 RID: 3271 RVA: 0x00044456 File Offset: 0x00042656
		internal static object AutoGeneratedGetMemberValue_father(object o)
		{
			return ((Hero)o)._father;
		}

		// Token: 0x06000CC8 RID: 3272 RVA: 0x00044463 File Offset: 0x00042663
		internal static object AutoGeneratedGetMemberValue_mother(object o)
		{
			return ((Hero)o)._mother;
		}

		// Token: 0x06000CC9 RID: 3273 RVA: 0x00044470 File Offset: 0x00042670
		internal static object AutoGeneratedGetMemberValue_exSpouses(object o)
		{
			return ((Hero)o)._exSpouses;
		}

		// Token: 0x06000CCA RID: 3274 RVA: 0x0004447D File Offset: 0x0004267D
		internal static object AutoGeneratedGetMemberValue_spouse(object o)
		{
			return ((Hero)o)._spouse;
		}

		// Token: 0x06000CCB RID: 3275 RVA: 0x0004448A File Offset: 0x0004268A
		internal static object AutoGeneratedGetMemberValue_children(object o)
		{
			return ((Hero)o)._children;
		}

		// Token: 0x06000CCC RID: 3276 RVA: 0x00044497 File Offset: 0x00042697
		internal static object AutoGeneratedGetMemberValue_heroDeveloper(object o)
		{
			return ((Hero)o)._heroDeveloper;
		}

		// Token: 0x170002CC RID: 716
		// (get) Token: 0x06000CCD RID: 3277 RVA: 0x000444A4 File Offset: 0x000426A4
		// (set) Token: 0x06000CCE RID: 3278 RVA: 0x000444AC File Offset: 0x000426AC
		[SaveableProperty(100)]
		public StaticBodyProperties StaticBodyProperties { get; set; }

		// Token: 0x170002CD RID: 717
		// (get) Token: 0x06000CCF RID: 3279 RVA: 0x000444B5 File Offset: 0x000426B5
		// (set) Token: 0x06000CD0 RID: 3280 RVA: 0x000444BD File Offset: 0x000426BD
		[SaveableProperty(111)]
		public float Weight { get; set; }

		// Token: 0x170002CE RID: 718
		// (get) Token: 0x06000CD1 RID: 3281 RVA: 0x000444C6 File Offset: 0x000426C6
		// (set) Token: 0x06000CD2 RID: 3282 RVA: 0x000444CE File Offset: 0x000426CE
		[SaveableProperty(112)]
		public float Build { get; set; }

		// Token: 0x170002CF RID: 719
		// (get) Token: 0x06000CD3 RID: 3283 RVA: 0x000444D7 File Offset: 0x000426D7
		public BodyProperties BodyProperties
		{
			get
			{
				return new BodyProperties(new DynamicBodyProperties(this.Age, this.Weight, this.Build), this.StaticBodyProperties);
			}
		}

		// Token: 0x170002D0 RID: 720
		// (get) Token: 0x06000CD4 RID: 3284 RVA: 0x000444FB File Offset: 0x000426FB
		// (set) Token: 0x06000CD5 RID: 3285 RVA: 0x00044503 File Offset: 0x00042703
		public float PassedTimeAtHomeSettlement
		{
			get
			{
				return this._passedTimeAtHomeSettlement;
			}
			set
			{
				this._passedTimeAtHomeSettlement = value;
			}
		}

		// Token: 0x170002D1 RID: 721
		// (get) Token: 0x06000CD6 RID: 3286 RVA: 0x0004450C File Offset: 0x0004270C
		public bool CanHaveRecruits
		{
			get
			{
				return Campaign.Current.Models.VolunteerModel.CanHaveRecruits(this);
			}
		}

		// Token: 0x170002D2 RID: 722
		// (get) Token: 0x06000CD7 RID: 3287 RVA: 0x00044523 File Offset: 0x00042723
		public CharacterObject CharacterObject
		{
			get
			{
				return this._characterObject;
			}
		}

		// Token: 0x06000CD8 RID: 3288 RVA: 0x0004452B File Offset: 0x0004272B
		private void SetCharacterObject(CharacterObject characterObject)
		{
			this._characterObject = characterObject;
			this.SetInitialValuesFromCharacter(this._characterObject);
			this._characterObject.HeroObject = this;
		}

		// Token: 0x170002D3 RID: 723
		// (get) Token: 0x06000CD9 RID: 3289 RVA: 0x0004454C File Offset: 0x0004274C
		public TextObject FirstName
		{
			get
			{
				return this._firstName;
			}
		}

		// Token: 0x170002D4 RID: 724
		// (get) Token: 0x06000CDA RID: 3290 RVA: 0x00044554 File Offset: 0x00042754
		public TextObject Name
		{
			get
			{
				return this._name;
			}
		}

		// Token: 0x06000CDB RID: 3291 RVA: 0x0004455C File Offset: 0x0004275C
		public override TextObject GetName()
		{
			return this.Name;
		}

		// Token: 0x06000CDC RID: 3292 RVA: 0x00044564 File Offset: 0x00042764
		public void SetName(TextObject fullName, TextObject firstName)
		{
			this._name = fullName;
			this._firstName = firstName;
			if (this.PartyBelongedTo != null && this.PartyBelongedTo.LeaderHero == this)
			{
				this.PartyBelongedTo.PartyComponent.ClearCachedName();
			}
		}

		// Token: 0x170002D5 RID: 725
		// (get) Token: 0x06000CDD RID: 3293 RVA: 0x0004459A File Offset: 0x0004279A
		// (set) Token: 0x06000CDE RID: 3294 RVA: 0x000445A2 File Offset: 0x000427A2
		[SaveableProperty(190)]
		public TextObject EncyclopediaText { get; set; }

		// Token: 0x170002D6 RID: 726
		// (get) Token: 0x06000CDF RID: 3295 RVA: 0x000445AB File Offset: 0x000427AB
		public string EncyclopediaLink
		{
			get
			{
				return (Campaign.Current.EncyclopediaManager.GetIdentifier(typeof(Hero)) + "-" + base.StringId) ?? "";
			}
		}

		// Token: 0x170002D7 RID: 727
		// (get) Token: 0x06000CE0 RID: 3296 RVA: 0x000445DF File Offset: 0x000427DF
		public TextObject EncyclopediaLinkWithName
		{
			get
			{
				return HyperlinkTexts.GetHeroHyperlinkText(this.EncyclopediaLink, this.Name);
			}
		}

		// Token: 0x170002D8 RID: 728
		// (get) Token: 0x06000CE1 RID: 3297 RVA: 0x000445F2 File Offset: 0x000427F2
		// (set) Token: 0x06000CE2 RID: 3298 RVA: 0x000445FA File Offset: 0x000427FA
		[SaveableProperty(200)]
		public bool IsFemale { get; set; }

		// Token: 0x170002D9 RID: 729
		// (get) Token: 0x06000CE3 RID: 3299 RVA: 0x00044603 File Offset: 0x00042803
		// (set) Token: 0x06000CE4 RID: 3300 RVA: 0x0004460B File Offset: 0x0004280B
		[SaveableProperty(210)]
		private Equipment _battleEquipment { get; set; }

		// Token: 0x170002DA RID: 730
		// (get) Token: 0x06000CE5 RID: 3301 RVA: 0x00044614 File Offset: 0x00042814
		// (set) Token: 0x06000CE6 RID: 3302 RVA: 0x0004461C File Offset: 0x0004281C
		[SaveableProperty(220)]
		private Equipment _civilianEquipment { get; set; }

		// Token: 0x170002DB RID: 731
		// (get) Token: 0x06000CE7 RID: 3303 RVA: 0x00044625 File Offset: 0x00042825
		// (set) Token: 0x06000CE8 RID: 3304 RVA: 0x0004462D File Offset: 0x0004282D
		[SaveableProperty(881)]
		private Equipment _stealthEquipment { get; set; }

		// Token: 0x170002DC RID: 732
		// (get) Token: 0x06000CE9 RID: 3305 RVA: 0x00044636 File Offset: 0x00042836
		public Equipment BattleEquipment
		{
			get
			{
				return this._battleEquipment ?? Campaign.Current.DeadBattleEquipment;
			}
		}

		// Token: 0x170002DD RID: 733
		// (get) Token: 0x06000CEA RID: 3306 RVA: 0x0004464C File Offset: 0x0004284C
		public Equipment CivilianEquipment
		{
			get
			{
				return this._civilianEquipment ?? Campaign.Current.DeadCivilianEquipment;
			}
		}

		// Token: 0x170002DE RID: 734
		// (get) Token: 0x06000CEB RID: 3307 RVA: 0x00044662 File Offset: 0x00042862
		public Equipment StealthEquipment
		{
			get
			{
				return this._stealthEquipment ?? Campaign.Current.DefaultStealthEquipment;
			}
		}

		// Token: 0x170002DF RID: 735
		// (get) Token: 0x06000CEC RID: 3308 RVA: 0x00044678 File Offset: 0x00042878
		// (set) Token: 0x06000CED RID: 3309 RVA: 0x00044680 File Offset: 0x00042880
		[SaveableProperty(240)]
		public CampaignTime CaptivityStartTime { get; set; }

		// Token: 0x170002E0 RID: 736
		// (get) Token: 0x06000CEE RID: 3310 RVA: 0x00044689 File Offset: 0x00042889
		// (set) Token: 0x06000CEF RID: 3311 RVA: 0x00044691 File Offset: 0x00042891
		[SaveableProperty(800)]
		public FormationClass PreferredUpgradeFormation { get; set; }

		// Token: 0x170002E1 RID: 737
		// (get) Token: 0x06000CF0 RID: 3312 RVA: 0x0004469A File Offset: 0x0004289A
		// (set) Token: 0x06000CF1 RID: 3313 RVA: 0x000446A2 File Offset: 0x000428A2
		public Hero.CharacterStates HeroState
		{
			get
			{
				return this._heroState;
			}
			private set
			{
				this.ChangeState(value);
			}
		}

		// Token: 0x170002E2 RID: 738
		// (get) Token: 0x06000CF2 RID: 3314 RVA: 0x000446AB File Offset: 0x000428AB
		public IReadOnlyPropertyOwner<CharacterAttribute> CharacterAttributes
		{
			get
			{
				return this._characterAttributes;
			}
		}

		// Token: 0x170002E3 RID: 739
		// (get) Token: 0x06000CF3 RID: 3315 RVA: 0x000446B3 File Offset: 0x000428B3
		// (set) Token: 0x06000CF4 RID: 3316 RVA: 0x000446BB File Offset: 0x000428BB
		[SaveableProperty(320)]
		public bool IsMinorFactionHero { get; set; }

		// Token: 0x170002E4 RID: 740
		// (get) Token: 0x06000CF5 RID: 3317 RVA: 0x000446C4 File Offset: 0x000428C4
		// (set) Token: 0x06000CF6 RID: 3318 RVA: 0x000446CC File Offset: 0x000428CC
		public IssueBase Issue { get; private set; }

		// Token: 0x06000CF7 RID: 3319 RVA: 0x000446D5 File Offset: 0x000428D5
		public void OnIssueCreatedForHero(IssueBase issue)
		{
			this.Issue = issue;
		}

		// Token: 0x06000CF8 RID: 3320 RVA: 0x000446DE File Offset: 0x000428DE
		public void OnIssueDeactivatedForHero()
		{
			this.Issue = null;
		}

		// Token: 0x06000CF9 RID: 3321 RVA: 0x000446E7 File Offset: 0x000428E7
		public override string ToString()
		{
			return this.Name.ToString();
		}

		// Token: 0x170002E5 RID: 741
		// (get) Token: 0x06000CFA RID: 3322 RVA: 0x000446F4 File Offset: 0x000428F4
		public int WoundedHealthLimit
		{
			get
			{
				return Campaign.Current.Models.CharacterStatsModel.WoundedHitPointLimit(this);
			}
		}

		// Token: 0x170002E6 RID: 742
		// (get) Token: 0x06000CFB RID: 3323 RVA: 0x0004470B File Offset: 0x0004290B
		public bool IsNoncombatant
		{
			get
			{
				return !Campaign.Current.Models.HeroCreationModel.IsHeroCombatant(this);
			}
		}

		// Token: 0x170002E7 RID: 743
		// (get) Token: 0x06000CFC RID: 3324 RVA: 0x00044725 File Offset: 0x00042925
		// (set) Token: 0x06000CFD RID: 3325 RVA: 0x00044730 File Offset: 0x00042930
		public Clan CompanionOf
		{
			get
			{
				return this._companionOf;
			}
			set
			{
				if (value == this._companionOf)
				{
					return;
				}
				this._homeSettlement = null;
				if (this._companionOf != null)
				{
					this._companionOf.OnCompanionRemoved(this);
				}
				this._companionOf = value;
				if (this._companionOf != null)
				{
					this._companionOf.OnCompanionAdded(this);
				}
			}
		}

		// Token: 0x170002E8 RID: 744
		// (get) Token: 0x06000CFE RID: 3326 RVA: 0x0004477D File Offset: 0x0004297D
		public IEnumerable<Hero> CompanionsInParty
		{
			get
			{
				if (this.PartyBelongedTo != null && this.Clan != null)
				{
					foreach (Hero hero in this.Clan.Companions)
					{
						if (hero.PartyBelongedTo == this.PartyBelongedTo)
						{
							yield return hero;
						}
					}
					List<Hero>.Enumerator enumerator = default(List<Hero>.Enumerator);
				}
				yield break;
				yield break;
			}
		}

		// Token: 0x170002E9 RID: 745
		// (get) Token: 0x06000CFF RID: 3327 RVA: 0x0004478D File Offset: 0x0004298D
		// (set) Token: 0x06000D00 RID: 3328 RVA: 0x00044795 File Offset: 0x00042995
		[SaveableProperty(780)]
		public Occupation Occupation { get; private set; }

		// Token: 0x170002EA RID: 746
		// (get) Token: 0x06000D01 RID: 3329 RVA: 0x0004479E File Offset: 0x0004299E
		public CharacterObject Template
		{
			get
			{
				return this.CharacterObject.OriginalCharacter;
			}
		}

		// Token: 0x170002EB RID: 747
		// (get) Token: 0x06000D02 RID: 3330 RVA: 0x000447AB File Offset: 0x000429AB
		public bool IsDead
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Dead;
			}
		}

		// Token: 0x170002EC RID: 748
		// (get) Token: 0x06000D03 RID: 3331 RVA: 0x000447B6 File Offset: 0x000429B6
		public bool IsFugitive
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Fugitive;
			}
		}

		// Token: 0x170002ED RID: 749
		// (get) Token: 0x06000D04 RID: 3332 RVA: 0x000447C1 File Offset: 0x000429C1
		public bool IsPrisoner
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Prisoner;
			}
		}

		// Token: 0x170002EE RID: 750
		// (get) Token: 0x06000D05 RID: 3333 RVA: 0x000447CC File Offset: 0x000429CC
		public bool IsReleased
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Released;
			}
		}

		// Token: 0x170002EF RID: 751
		// (get) Token: 0x06000D06 RID: 3334 RVA: 0x000447D7 File Offset: 0x000429D7
		public bool IsActive
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Active;
			}
		}

		// Token: 0x170002F0 RID: 752
		// (get) Token: 0x06000D07 RID: 3335 RVA: 0x000447E2 File Offset: 0x000429E2
		public bool IsNotSpawned
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.NotSpawned;
			}
		}

		// Token: 0x170002F1 RID: 753
		// (get) Token: 0x06000D08 RID: 3336 RVA: 0x000447ED File Offset: 0x000429ED
		public bool IsDisabled
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Disabled;
			}
		}

		// Token: 0x170002F2 RID: 754
		// (get) Token: 0x06000D09 RID: 3337 RVA: 0x000447F8 File Offset: 0x000429F8
		public bool IsTraveling
		{
			get
			{
				return this.HeroState == Hero.CharacterStates.Traveling;
			}
		}

		// Token: 0x170002F3 RID: 755
		// (get) Token: 0x06000D0A RID: 3338 RVA: 0x00044803 File Offset: 0x00042A03
		public bool IsAlive
		{
			get
			{
				return !this.IsDead;
			}
		}

		// Token: 0x170002F4 RID: 756
		// (get) Token: 0x06000D0B RID: 3339 RVA: 0x0004480E File Offset: 0x00042A0E
		// (set) Token: 0x06000D0C RID: 3340 RVA: 0x00044816 File Offset: 0x00042A16
		[SaveableProperty(400)]
		public KillCharacterAction.KillCharacterActionDetail DeathMark { get; private set; }

		// Token: 0x170002F5 RID: 757
		// (get) Token: 0x06000D0D RID: 3341 RVA: 0x0004481F File Offset: 0x00042A1F
		// (set) Token: 0x06000D0E RID: 3342 RVA: 0x00044827 File Offset: 0x00042A27
		[SaveableProperty(401)]
		public Hero DeathMarkKillerHero { get; private set; }

		// Token: 0x170002F6 RID: 758
		// (get) Token: 0x06000D0F RID: 3343 RVA: 0x00044830 File Offset: 0x00042A30
		// (set) Token: 0x06000D10 RID: 3344 RVA: 0x00044838 File Offset: 0x00042A38
		[SaveableProperty(411)]
		public Settlement LastKnownClosestSettlement { get; private set; }

		// Token: 0x06000D11 RID: 3345 RVA: 0x00044841 File Offset: 0x00042A41
		public void UpdateLastKnownClosestSettlement(Settlement settlement)
		{
			this.LastKnownClosestSettlement = settlement;
		}

		// Token: 0x06000D12 RID: 3346 RVA: 0x0004484C File Offset: 0x00042A4C
		public void SetNewOccupation(Occupation occupation)
		{
			Occupation occupation2 = this.Occupation;
			this.Occupation = occupation;
			CampaignEventDispatcher.Instance.OnHeroOccupationChanged(this, occupation2);
		}

		// Token: 0x170002F7 RID: 759
		// (get) Token: 0x06000D13 RID: 3347 RVA: 0x00044873 File Offset: 0x00042A73
		public bool IsWanderer
		{
			get
			{
				return this.Occupation == Occupation.Wanderer;
			}
		}

		// Token: 0x170002F8 RID: 760
		// (get) Token: 0x06000D14 RID: 3348 RVA: 0x0004487F File Offset: 0x00042A7F
		public bool IsTemplate
		{
			get
			{
				return this.CharacterObject.IsTemplate;
			}
		}

		// Token: 0x170002F9 RID: 761
		// (get) Token: 0x06000D15 RID: 3349 RVA: 0x0004488C File Offset: 0x00042A8C
		public bool IsWounded
		{
			get
			{
				return this.HitPoints <= this.WoundedHealthLimit;
			}
		}

		// Token: 0x170002FA RID: 762
		// (get) Token: 0x06000D16 RID: 3350 RVA: 0x0004489F File Offset: 0x00042A9F
		public bool IsPlayerCompanion
		{
			get
			{
				return this.CompanionOf == Clan.PlayerClan;
			}
		}

		// Token: 0x170002FB RID: 763
		// (get) Token: 0x06000D17 RID: 3351 RVA: 0x000448AE File Offset: 0x00042AAE
		public bool IsMerchant
		{
			get
			{
				return this.Occupation == Occupation.Merchant;
			}
		}

		// Token: 0x170002FC RID: 764
		// (get) Token: 0x06000D18 RID: 3352 RVA: 0x000448BA File Offset: 0x00042ABA
		public bool IsPreacher
		{
			get
			{
				return this.Occupation == Occupation.Preacher;
			}
		}

		// Token: 0x170002FD RID: 765
		// (get) Token: 0x06000D19 RID: 3353 RVA: 0x000448C6 File Offset: 0x00042AC6
		public bool IsHeadman
		{
			get
			{
				return this.Occupation == Occupation.Headman;
			}
		}

		// Token: 0x170002FE RID: 766
		// (get) Token: 0x06000D1A RID: 3354 RVA: 0x000448D2 File Offset: 0x00042AD2
		public bool IsGangLeader
		{
			get
			{
				return this.Occupation == Occupation.GangLeader;
			}
		}

		// Token: 0x170002FF RID: 767
		// (get) Token: 0x06000D1B RID: 3355 RVA: 0x000448DE File Offset: 0x00042ADE
		public bool IsArtisan
		{
			get
			{
				return this.Occupation == Occupation.Artisan;
			}
		}

		// Token: 0x17000300 RID: 768
		// (get) Token: 0x06000D1C RID: 3356 RVA: 0x000448EA File Offset: 0x00042AEA
		public bool IsRuralNotable
		{
			get
			{
				return this.Occupation == Occupation.RuralNotable;
			}
		}

		// Token: 0x17000301 RID: 769
		// (get) Token: 0x06000D1D RID: 3357 RVA: 0x000448F6 File Offset: 0x00042AF6
		public bool IsUrbanNotable
		{
			get
			{
				return this.Occupation == Occupation.Merchant || this.Occupation == Occupation.Artisan || this.Occupation == Occupation.GangLeader;
			}
		}

		// Token: 0x17000302 RID: 770
		// (get) Token: 0x06000D1E RID: 3358 RVA: 0x00044918 File Offset: 0x00042B18
		public bool IsSpecial
		{
			get
			{
				return this.Occupation == Occupation.Special;
			}
		}

		// Token: 0x17000303 RID: 771
		// (get) Token: 0x06000D1F RID: 3359 RVA: 0x00044924 File Offset: 0x00042B24
		public bool IsRebel
		{
			get
			{
				return this.Clan != null && this.Clan.IsRebelClan;
			}
		}

		// Token: 0x17000304 RID: 772
		// (get) Token: 0x06000D20 RID: 3360 RVA: 0x0004493B File Offset: 0x00042B3B
		public bool IsCommander
		{
			get
			{
				return this.GetTraitLevel(DefaultTraits.Commander) > 0;
			}
		}

		// Token: 0x17000305 RID: 773
		// (get) Token: 0x06000D21 RID: 3361 RVA: 0x0004494B File Offset: 0x00042B4B
		public bool IsPartyLeader
		{
			get
			{
				return this.PartyBelongedTo != null && this.PartyBelongedTo.LeaderHero == this;
			}
		}

		// Token: 0x17000306 RID: 774
		// (get) Token: 0x06000D22 RID: 3362 RVA: 0x00044965 File Offset: 0x00042B65
		public bool IsNotable
		{
			get
			{
				return this.IsArtisan || this.IsGangLeader || this.IsPreacher || this.IsMerchant || this.IsRuralNotable || this.IsHeadman;
			}
		}

		// Token: 0x17000307 RID: 775
		// (get) Token: 0x06000D23 RID: 3363 RVA: 0x00044997 File Offset: 0x00042B97
		public bool IsLord
		{
			get
			{
				return this.Occupation == Occupation.Lord;
			}
		}

		// Token: 0x17000308 RID: 776
		// (get) Token: 0x06000D24 RID: 3364 RVA: 0x000449A2 File Offset: 0x00042BA2
		public int MaxHitPoints
		{
			get
			{
				return this.CharacterObject.MaxHitPoints();
			}
		}

		// Token: 0x17000309 RID: 777
		// (get) Token: 0x06000D25 RID: 3365 RVA: 0x000449AF File Offset: 0x00042BAF
		// (set) Token: 0x06000D26 RID: 3366 RVA: 0x000449B8 File Offset: 0x00042BB8
		public int HitPoints
		{
			get
			{
				return this._health;
			}
			set
			{
				if (this._health == value)
				{
					return;
				}
				int health = this._health;
				this._health = value;
				if (this._health < 0)
				{
					this._health = 1;
				}
				else if (this._health > this.CharacterObject.MaxHitPoints())
				{
					this._health = this.CharacterObject.MaxHitPoints();
				}
				if (health <= this.WoundedHealthLimit != this._health <= this.WoundedHealthLimit)
				{
					if (this.PartyBelongedTo != null)
					{
						this.PartyBelongedTo.MemberRoster.OnHeroHealthStatusChanged(this);
					}
					if (this.PartyBelongedToAsPrisoner != null)
					{
						this.PartyBelongedToAsPrisoner.PrisonRoster.OnHeroHealthStatusChanged(this);
					}
				}
				if (health > this.WoundedHealthLimit && this.IsWounded)
				{
					CampaignEventDispatcher.Instance.OnHeroWounded(this);
				}
			}
		}

		// Token: 0x1700030A RID: 778
		// (get) Token: 0x06000D27 RID: 3367 RVA: 0x00044A7E File Offset: 0x00042C7E
		public CampaignTime BirthDay
		{
			get
			{
				if (CampaignOptions.IsLifeDeathCycleDisabled)
				{
					return CampaignTime.YearsFromNow(-this._defaultAge);
				}
				return this._birthDay;
			}
		}

		// Token: 0x1700030B RID: 779
		// (get) Token: 0x06000D28 RID: 3368 RVA: 0x00044A9A File Offset: 0x00042C9A
		// (set) Token: 0x06000D29 RID: 3369 RVA: 0x00044AC6 File Offset: 0x00042CC6
		public CampaignTime DeathDay
		{
			get
			{
				if (CampaignOptions.IsLifeDeathCycleDisabled)
				{
					return CampaignTime.YearsFromNow(-this._defaultAge) + CampaignTime.Years(this._defaultAge);
				}
				return this._deathDay;
			}
			private set
			{
				this._deathDay = value;
			}
		}

		// Token: 0x1700030C RID: 780
		// (get) Token: 0x06000D2A RID: 3370 RVA: 0x00044AD0 File Offset: 0x00042CD0
		public float Age
		{
			get
			{
				if (CampaignOptions.IsLifeDeathCycleDisabled)
				{
					return this._defaultAge;
				}
				if (this.IsAlive)
				{
					return this._birthDay.ElapsedYearsUntilNow;
				}
				return (float)(this.DeathDay - this._birthDay).ToYears;
			}
		}

		// Token: 0x06000D2B RID: 3371 RVA: 0x00044B19 File Offset: 0x00042D19
		public void SetBirthDay(CampaignTime birthday)
		{
			this._birthDay = birthday;
			this._defaultAge = (birthday.IsNow ? 0.001f : this._birthDay.ElapsedYearsUntilNow);
		}

		// Token: 0x06000D2C RID: 3372 RVA: 0x00044B43 File Offset: 0x00042D43
		public void SetDeathDay(CampaignTime deathDay)
		{
			this._deathDay = deathDay;
		}

		// Token: 0x1700030D RID: 781
		// (get) Token: 0x06000D2D RID: 3373 RVA: 0x00044B4C File Offset: 0x00042D4C
		public bool IsChild
		{
			get
			{
				return this.Age < (float)Campaign.Current.Models.AgeModel.HeroComesOfAge;
			}
		}

		// Token: 0x1700030E RID: 782
		// (get) Token: 0x06000D2E RID: 3374 RVA: 0x00044B6B File Offset: 0x00042D6B
		public float Power
		{
			get
			{
				return this._power;
			}
		}

		// Token: 0x06000D2F RID: 3375 RVA: 0x00044B73 File Offset: 0x00042D73
		public void AddPower(float value)
		{
			this._power += value;
		}

		// Token: 0x1700030F RID: 783
		// (get) Token: 0x06000D30 RID: 3376 RVA: 0x00044B83 File Offset: 0x00042D83
		public Banner ClanBanner
		{
			get
			{
				Clan clan = this.Clan;
				if (clan == null)
				{
					return null;
				}
				return clan.Banner;
			}
		}

		// Token: 0x17000310 RID: 784
		// (get) Token: 0x06000D31 RID: 3377 RVA: 0x00044B96 File Offset: 0x00042D96
		// (set) Token: 0x06000D32 RID: 3378 RVA: 0x00044B9E File Offset: 0x00042D9E
		[SaveableProperty(481)]
		public long LastExaminedLogEntryID { get; set; }

		// Token: 0x17000311 RID: 785
		// (get) Token: 0x06000D33 RID: 3379 RVA: 0x00044BA7 File Offset: 0x00042DA7
		// (set) Token: 0x06000D34 RID: 3380 RVA: 0x00044BBC File Offset: 0x00042DBC
		public Clan Clan
		{
			get
			{
				return this.CompanionOf ?? this._clan;
			}
			set
			{
				if (this._clan != value)
				{
					this._homeSettlement = null;
					if (this._clan != null)
					{
						this._clan.OnLordRemoved(this);
					}
					Clan clan = this._clan;
					this._clan = value;
					if (this._clan != null)
					{
						this._clan.OnLordAdded(this);
					}
					CampaignEventDispatcher.Instance.OnHeroChangedClan(this, clan);
				}
			}
		}

		// Token: 0x17000312 RID: 786
		// (get) Token: 0x06000D35 RID: 3381 RVA: 0x00044C1B File Offset: 0x00042E1B
		// (set) Token: 0x06000D36 RID: 3382 RVA: 0x00044C23 File Offset: 0x00042E23
		public Clan SupporterOf
		{
			get
			{
				return this._supporterOf;
			}
			set
			{
				if (this._supporterOf != value)
				{
					if (this._supporterOf != null)
					{
						this._supporterOf.OnSupporterNotableRemoved(this);
					}
					this._supporterOf = value;
					if (this._supporterOf != null)
					{
						this._supporterOf.OnSupporterNotableAdded(this);
					}
				}
			}
		}

		// Token: 0x17000313 RID: 787
		// (get) Token: 0x06000D37 RID: 3383 RVA: 0x00044C5D File Offset: 0x00042E5D
		// (set) Token: 0x06000D38 RID: 3384 RVA: 0x00044C65 File Offset: 0x00042E65
		public Town GovernorOf
		{
			get
			{
				return this._governorOf;
			}
			set
			{
				if (value != this._governorOf)
				{
					this._governorOf = value;
				}
			}
		}

		// Token: 0x17000314 RID: 788
		// (get) Token: 0x06000D39 RID: 3385 RVA: 0x00044C78 File Offset: 0x00042E78
		public IFaction MapFaction
		{
			get
			{
				if (this.Clan != null)
				{
					IFaction kingdom = this.Clan.Kingdom;
					return kingdom ?? this.Clan;
				}
				if (this.IsSpecial)
				{
					return null;
				}
				if (this.HomeSettlement != null)
				{
					return this.HomeSettlement.MapFaction;
				}
				if (this.PartyBelongedTo != null)
				{
					return this.PartyBelongedTo.MapFaction;
				}
				return null;
			}
		}

		// Token: 0x17000315 RID: 789
		// (get) Token: 0x06000D3A RID: 3386 RVA: 0x00044CD8 File Offset: 0x00042ED8
		// (set) Token: 0x06000D3B RID: 3387 RVA: 0x00044CE0 File Offset: 0x00042EE0
		public List<Alley> OwnedAlleys { get; private set; }

		// Token: 0x17000316 RID: 790
		// (get) Token: 0x06000D3C RID: 3388 RVA: 0x00044CE9 File Offset: 0x00042EE9
		public bool IsFactionLeader
		{
			get
			{
				return this.MapFaction != null && this.MapFaction.Leader == this;
			}
		}

		// Token: 0x17000317 RID: 791
		// (get) Token: 0x06000D3D RID: 3389 RVA: 0x00044D03 File Offset: 0x00042F03
		public bool IsKingdomLeader
		{
			get
			{
				return this.MapFaction != null && this.MapFaction.IsKingdomFaction && this.MapFaction.Leader == this;
			}
		}

		// Token: 0x17000318 RID: 792
		// (get) Token: 0x06000D3E RID: 3390 RVA: 0x00044D2A File Offset: 0x00042F2A
		public bool IsClanLeader
		{
			get
			{
				return this.Clan != null && this.Clan.Leader == this;
			}
		}

		// Token: 0x17000319 RID: 793
		// (get) Token: 0x06000D3F RID: 3391 RVA: 0x00044D44 File Offset: 0x00042F44
		// (set) Token: 0x06000D40 RID: 3392 RVA: 0x00044D4C File Offset: 0x00042F4C
		public List<CaravanPartyComponent> OwnedCaravans { get; private set; }

		// Token: 0x1700031A RID: 794
		// (get) Token: 0x06000D41 RID: 3393 RVA: 0x00044D55 File Offset: 0x00042F55
		// (set) Token: 0x06000D42 RID: 3394 RVA: 0x00044D5D File Offset: 0x00042F5D
		public MobileParty PartyBelongedTo
		{
			get
			{
				return this._partyBelongedTo;
			}
			private set
			{
				this.SetPartyBelongedTo(value);
			}
		}

		// Token: 0x1700031B RID: 795
		// (get) Token: 0x06000D43 RID: 3395 RVA: 0x00044D66 File Offset: 0x00042F66
		// (set) Token: 0x06000D44 RID: 3396 RVA: 0x00044D6E File Offset: 0x00042F6E
		[SaveableProperty(570)]
		public PartyBase PartyBelongedToAsPrisoner { get; private set; }

		// Token: 0x1700031C RID: 796
		// (get) Token: 0x06000D45 RID: 3397 RVA: 0x00044D77 File Offset: 0x00042F77
		// (set) Token: 0x06000D46 RID: 3398 RVA: 0x00044D7F File Offset: 0x00042F7F
		public Settlement StayingInSettlement
		{
			get
			{
				return this._stayingInSettlement;
			}
			set
			{
				if (this._stayingInSettlement != value)
				{
					if (this._stayingInSettlement != null)
					{
						this._stayingInSettlement.RemoveHeroWithoutParty(this);
						this._stayingInSettlement = null;
					}
					if (value != null)
					{
						value.AddHeroWithoutParty(this);
					}
					this._stayingInSettlement = value;
				}
			}
		}

		// Token: 0x1700031D RID: 797
		// (get) Token: 0x06000D47 RID: 3399 RVA: 0x00044DB6 File Offset: 0x00042FB6
		public bool IsHumanPlayerCharacter
		{
			get
			{
				return this == Hero.MainHero;
			}
		}

		// Token: 0x1700031E RID: 798
		// (get) Token: 0x06000D48 RID: 3400 RVA: 0x00044DC0 File Offset: 0x00042FC0
		// (set) Token: 0x06000D49 RID: 3401 RVA: 0x00044DC8 File Offset: 0x00042FC8
		public bool IsKnownToPlayer
		{
			get
			{
				return this._isKnownToPlayer;
			}
			set
			{
				if (this._isKnownToPlayer != value)
				{
					this._isKnownToPlayer = value;
					CampaignEventDispatcher.Instance.OnPlayerLearnsAboutHero(this);
				}
			}
		}

		// Token: 0x1700031F RID: 799
		// (get) Token: 0x06000D4A RID: 3402 RVA: 0x00044DE5 File Offset: 0x00042FE5
		// (set) Token: 0x06000D4B RID: 3403 RVA: 0x00044DED File Offset: 0x00042FED
		public bool HasMet
		{
			get
			{
				return this._hasMet;
			}
			private set
			{
				if (this._hasMet != value)
				{
					this._hasMet = value;
					CampaignEventDispatcher.Instance.OnPlayerMetHero(this);
				}
			}
		}

		// Token: 0x06000D4C RID: 3404 RVA: 0x00044E0A File Offset: 0x0004300A
		public void SetHasMet()
		{
			this.HasMet = true;
			this.LastMeetingTimeWithPlayer = CampaignTime.Now;
		}

		// Token: 0x17000320 RID: 800
		// (get) Token: 0x06000D4D RID: 3405 RVA: 0x00044E1E File Offset: 0x0004301E
		// (set) Token: 0x06000D4E RID: 3406 RVA: 0x00044E26 File Offset: 0x00043026
		[SaveableProperty(620)]
		public CampaignTime LastMeetingTimeWithPlayer { get; set; }

		// Token: 0x17000321 RID: 801
		// (get) Token: 0x06000D4F RID: 3407 RVA: 0x00044E2F File Offset: 0x0004302F
		// (set) Token: 0x06000D50 RID: 3408 RVA: 0x00044E37 File Offset: 0x00043037
		public Settlement BornSettlement
		{
			get
			{
				return this._bornSettlement;
			}
			set
			{
				this._bornSettlement = value;
				this._homeSettlement = null;
			}
		}

		// Token: 0x17000322 RID: 802
		// (get) Token: 0x06000D51 RID: 3409 RVA: 0x00044E47 File Offset: 0x00043047
		public Settlement HomeSettlement
		{
			get
			{
				if (this._homeSettlement == null)
				{
					this.UpdateHomeSettlement();
				}
				return this._homeSettlement;
			}
		}

		// Token: 0x17000323 RID: 803
		// (get) Token: 0x06000D52 RID: 3410 RVA: 0x00044E5D File Offset: 0x0004305D
		public float PowerModifier
		{
			get
			{
				if (this._powerModifier == -1f)
				{
					this._powerModifier = Campaign.Current.Models.MilitaryPowerModel.GetPowerModifierOfHero(this);
				}
				return this._powerModifier;
			}
		}

		// Token: 0x06000D53 RID: 3411 RVA: 0x00044E8D File Offset: 0x0004308D
		public void UpdatePowerModifier()
		{
			this._powerModifier = Campaign.Current.Models.MilitaryPowerModel.GetPowerModifierOfHero(this);
		}

		// Token: 0x06000D54 RID: 3412 RVA: 0x00044EAC File Offset: 0x000430AC
		public void UpdateHomeSettlement()
		{
			if (this.GovernorOf != null)
			{
				this._homeSettlement = this.GovernorOf.Owner.Settlement;
				return;
			}
			if (this.Spouse != null && this.Spouse.GovernorOf != null)
			{
				this._homeSettlement = this.Spouse.GovernorOf.Owner.Settlement;
				return;
			}
			foreach (Hero hero in this.Children)
			{
				if (hero.GovernorOf != null && hero.Clan == this.Clan)
				{
					this._homeSettlement = hero.GovernorOf.Owner.Settlement;
					return;
				}
			}
			if (this.Father != null && this.Father.GovernorOf != null && this.Father.Clan == this.Clan)
			{
				this._homeSettlement = this.Father.GovernorOf.Owner.Settlement;
				return;
			}
			if (this.Mother != null && this.Mother.GovernorOf != null && this.Mother.Clan == this.Clan)
			{
				this._homeSettlement = this.Mother.GovernorOf.Owner.Settlement;
				return;
			}
			foreach (Hero hero2 in this.Siblings)
			{
				if (hero2.GovernorOf != null && hero2.Clan == this.Clan)
				{
					this._homeSettlement = hero2.GovernorOf.Owner.Settlement;
					return;
				}
			}
			if (this.Clan != null)
			{
				this._homeSettlement = this.Clan.HomeSettlement;
				return;
			}
			if (this.CompanionOf != null)
			{
				this._homeSettlement = this.CompanionOf.HomeSettlement;
				return;
			}
			if (this.IsNotable && this.CurrentSettlement != null)
			{
				this._homeSettlement = this.CurrentSettlement;
				return;
			}
			this._homeSettlement = this._bornSettlement;
		}

		// Token: 0x17000324 RID: 804
		// (get) Token: 0x06000D55 RID: 3413 RVA: 0x000450C4 File Offset: 0x000432C4
		public Settlement CurrentSettlement
		{
			get
			{
				Settlement result = null;
				if (this.PartyBelongedTo != null)
				{
					result = this.PartyBelongedTo.CurrentSettlement;
				}
				else if (this.PartyBelongedToAsPrisoner != null)
				{
					result = (this.PartyBelongedToAsPrisoner.IsSettlement ? this.PartyBelongedToAsPrisoner.Settlement : (this.PartyBelongedToAsPrisoner.IsMobile ? this.PartyBelongedToAsPrisoner.MobileParty.CurrentSettlement : null));
				}
				else if (this.StayingInSettlement != null)
				{
					result = this.StayingInSettlement;
				}
				return result;
			}
		}

		// Token: 0x17000325 RID: 805
		// (get) Token: 0x06000D56 RID: 3414 RVA: 0x0004513E File Offset: 0x0004333E
		// (set) Token: 0x06000D57 RID: 3415 RVA: 0x00045146 File Offset: 0x00043346
		public int Gold
		{
			get
			{
				return this._gold;
			}
			set
			{
				this._gold = MathF.Max(0, value);
			}
		}

		// Token: 0x17000326 RID: 806
		// (get) Token: 0x06000D58 RID: 3416 RVA: 0x00045155 File Offset: 0x00043355
		// (set) Token: 0x06000D59 RID: 3417 RVA: 0x0004515D File Offset: 0x0004335D
		[SaveableProperty(660)]
		public int RandomValue { get; private set; } = MBRandom.RandomInt(1, int.MaxValue);

		// Token: 0x17000327 RID: 807
		// (get) Token: 0x06000D5A RID: 3418 RVA: 0x00045166 File Offset: 0x00043366
		// (set) Token: 0x06000D5B RID: 3419 RVA: 0x00045174 File Offset: 0x00043374
		public EquipmentElement BannerItem
		{
			get
			{
				return this.BattleEquipment[EquipmentIndex.ExtraWeaponSlot];
			}
			set
			{
				this.BattleEquipment[EquipmentIndex.ExtraWeaponSlot] = value;
			}
		}

		// Token: 0x17000328 RID: 808
		// (get) Token: 0x06000D5C RID: 3420 RVA: 0x00045183 File Offset: 0x00043383
		public float ProbabilityOfDeath
		{
			get
			{
				return Campaign.Current.Models.HeroDeathProbabilityCalculationModel.CalculateHeroDeathProbability(this);
			}
		}

		// Token: 0x17000329 RID: 809
		// (get) Token: 0x06000D5D RID: 3421 RVA: 0x0004519A File Offset: 0x0004339A
		// (set) Token: 0x06000D5E RID: 3422 RVA: 0x000451A2 File Offset: 0x000433A2
		public Hero Father
		{
			get
			{
				return this._father;
			}
			set
			{
				this._father = value;
				if (this._father != null)
				{
					this._father._children.Add(this);
				}
			}
		}

		// Token: 0x1700032A RID: 810
		// (get) Token: 0x06000D5F RID: 3423 RVA: 0x000451C4 File Offset: 0x000433C4
		// (set) Token: 0x06000D60 RID: 3424 RVA: 0x000451CC File Offset: 0x000433CC
		public Hero Mother
		{
			get
			{
				return this._mother;
			}
			set
			{
				this._mother = value;
				if (this._mother != null)
				{
					this._mother._children.Add(this);
				}
			}
		}

		// Token: 0x1700032B RID: 811
		// (get) Token: 0x06000D61 RID: 3425 RVA: 0x000451EE File Offset: 0x000433EE
		public MBReadOnlyList<Hero> ExSpouses
		{
			get
			{
				return this._exSpouses;
			}
		}

		// Token: 0x1700032C RID: 812
		// (get) Token: 0x06000D62 RID: 3426 RVA: 0x000451F6 File Offset: 0x000433F6
		// (set) Token: 0x06000D63 RID: 3427 RVA: 0x00045200 File Offset: 0x00043400
		public Hero Spouse
		{
			get
			{
				return this._spouse;
			}
			set
			{
				if (this._spouse != value)
				{
					Hero spouse = this._spouse;
					this._spouse = value;
					if (spouse != null)
					{
						this._exSpouses.Add(spouse);
						spouse.Spouse = null;
					}
					if (this._spouse != null)
					{
						this._spouse.Spouse = this;
					}
				}
			}
		}

		// Token: 0x1700032D RID: 813
		// (get) Token: 0x06000D64 RID: 3428 RVA: 0x0004524E File Offset: 0x0004344E
		public MBList<Hero> Children
		{
			get
			{
				return this._children;
			}
		}

		// Token: 0x1700032E RID: 814
		// (get) Token: 0x06000D65 RID: 3429 RVA: 0x00045256 File Offset: 0x00043456
		public IEnumerable<Hero> Siblings
		{
			get
			{
				if (this.Father != null)
				{
					foreach (Hero hero in this.Father._children)
					{
						if (hero != this)
						{
							yield return hero;
						}
					}
					List<Hero>.Enumerator enumerator = default(List<Hero>.Enumerator);
				}
				else if (this.Mother != null)
				{
					foreach (Hero hero2 in this.Mother._children)
					{
						if (hero2 != this)
						{
							yield return hero2;
						}
					}
					List<Hero>.Enumerator enumerator = default(List<Hero>.Enumerator);
				}
				yield break;
				yield break;
			}
		}

		// Token: 0x1700032F RID: 815
		// (get) Token: 0x06000D66 RID: 3430 RVA: 0x00045266 File Offset: 0x00043466
		public HeroDeveloper HeroDeveloper
		{
			get
			{
				return this._heroDeveloper;
			}
		}

		// Token: 0x06000D67 RID: 3431 RVA: 0x0004526E File Offset: 0x0004346E
		public int GetSkillValue(SkillObject skill)
		{
			if (this._heroSkills == null)
			{
				return 0;
			}
			return this._heroSkills.GetPropertyValue(skill);
		}

		// Token: 0x06000D68 RID: 3432 RVA: 0x00045286 File Offset: 0x00043486
		public void SetSkillValue(SkillObject skill, int value)
		{
			this._heroSkills.SetPropertyValue(skill, value);
		}

		// Token: 0x06000D69 RID: 3433 RVA: 0x00045295 File Offset: 0x00043495
		public void ClearSkills()
		{
			this._heroSkills.ClearAllProperty();
		}

		// Token: 0x06000D6A RID: 3434 RVA: 0x000452A2 File Offset: 0x000434A2
		public void AddSkillXp(SkillObject skill, float xpAmount)
		{
			HeroDeveloper heroDeveloper = this._heroDeveloper;
			if (heroDeveloper == null)
			{
				return;
			}
			heroDeveloper.AddSkillXp(skill, xpAmount, true, true);
		}

		// Token: 0x06000D6B RID: 3435 RVA: 0x000452B8 File Offset: 0x000434B8
		public int GetAttributeValue(CharacterAttribute charAttribute)
		{
			if (this._characterAttributes == null)
			{
				return 0;
			}
			return this._characterAttributes.GetPropertyValue(charAttribute);
		}

		// Token: 0x06000D6C RID: 3436 RVA: 0x000452D0 File Offset: 0x000434D0
		internal void SetAttributeValueInternal(CharacterAttribute charAttribute, int value)
		{
			int value2 = MBMath.ClampInt(value, 0, Campaign.Current.Models.CharacterDevelopmentModel.MaxAttribute);
			this._characterAttributes.SetPropertyValue(charAttribute, value2);
		}

		// Token: 0x06000D6D RID: 3437 RVA: 0x00045306 File Offset: 0x00043506
		public void ClearAttributes()
		{
			PropertyOwner<CharacterAttribute> characterAttributes = this._characterAttributes;
			if (characterAttributes == null)
			{
				return;
			}
			characterAttributes.ClearAllProperty();
		}

		// Token: 0x06000D6E RID: 3438 RVA: 0x00045318 File Offset: 0x00043518
		public void SetTraitLevel(TraitObject trait, int value)
		{
			value = MBMath.ClampInt(value, trait.MinValue, trait.MaxValue);
			this._heroTraits.SetPropertyValue(trait, value);
		}

		// Token: 0x06000D6F RID: 3439 RVA: 0x0004533B File Offset: 0x0004353B
		public int GetTraitLevel(TraitObject trait)
		{
			if (this._heroTraits == null)
			{
				return 0;
			}
			return this._heroTraits.GetPropertyValue(trait);
		}

		// Token: 0x06000D70 RID: 3440 RVA: 0x00045353 File Offset: 0x00043553
		public void ClearTraits()
		{
			this._heroTraits.ClearAllProperty();
		}

		// Token: 0x06000D71 RID: 3441 RVA: 0x00045360 File Offset: 0x00043560
		internal void SetPerkValueInternal(PerkObject perk, bool value)
		{
			if (this._heroPerks.GetPropertyValue(perk) == 1 != value)
			{
				this._heroPerks.SetPropertyValue(perk, value ? 1 : 0);
				if (value)
				{
					CampaignEventDispatcher.Instance.OnPerkOpened(this, perk);
					return;
				}
				CampaignEventDispatcher.Instance.OnPerkReset(this, perk);
			}
		}

		// Token: 0x06000D72 RID: 3442 RVA: 0x000453AE File Offset: 0x000435AE
		public bool GetPerkValue(PerkObject perk)
		{
			return this._heroPerks != null && this._heroPerks.GetPropertyValue(perk) != 0;
		}

		// Token: 0x06000D73 RID: 3443 RVA: 0x000453C9 File Offset: 0x000435C9
		public void ClearPerks()
		{
			this._heroPerks.ClearAllProperty();
			this.HitPoints = MathF.Min(this.HitPoints, this.MaxHitPoints);
		}

		// Token: 0x06000D74 RID: 3444 RVA: 0x000453ED File Offset: 0x000435ED
		public Hero(string stringId, CharacterObject characterObject, CampaignTime birthDay) : this()
		{
			this._birthDay = birthDay;
			base.StringId = Campaign.Current.CampaignObjectManager.FindNextUniqueStringId<Hero>(stringId);
			this.SetCharacterObject(characterObject);
			Campaign.Current.CampaignObjectManager.AddHero(this);
		}

		// Token: 0x06000D75 RID: 3445 RVA: 0x0004542C File Offset: 0x0004362C
		public Hero(string stringId, CharacterObject characterObject, CampaignTime birthDay, CampaignTime deathDay) : this()
		{
			this._birthDay = birthDay;
			this._deathDay = deathDay;
			this._heroState = ((this._deathDay != CampaignTime.Never) ? Hero.CharacterStates.Dead : Hero.CharacterStates.NotSpawned);
			base.StringId = Campaign.Current.CampaignObjectManager.FindNextUniqueStringId<Hero>(stringId);
			this.SetCharacterObject(characterObject);
			Campaign.Current.CampaignObjectManager.AddHero(this);
		}

		// Token: 0x06000D76 RID: 3446 RVA: 0x00045498 File Offset: 0x00043698
		public Hero()
		{
			this._battleEquipment = null;
			this._civilianEquipment = null;
			this._stealthEquipment = null;
			this._gold = 0;
			this.OwnedCaravans = new List<CaravanPartyComponent>();
			this.OwnedAlleys = new List<Alley>();
			this.SpecialItems = new MBList<ItemObject>();
			this._health = 1;
			this._birthDay = default(CampaignTime);
			this._deathDay = CampaignTime.Never;
			this._heroState = Hero.CharacterStates.NotSpawned;
			this._heroDeveloper = new HeroDeveloper(this);
			this._heroSkills = new PropertyOwner<SkillObject>();
			this._heroTraits = new PropertyOwner<TraitObject>();
			this._heroPerks = new PropertyOwner<PerkObject>();
			this._characterAttributes = new PropertyOwner<CharacterAttribute>();
			this.VolunteerTypes = new CharacterObject[6];
		}

		// Token: 0x06000D77 RID: 3447 RVA: 0x00045590 File Offset: 0x00043790
		[LoadInitializationCallback]
		private void OnLoad(MetaData metaData, ObjectLoadData objectLoadData)
		{
			this.OwnedCaravans = new List<CaravanPartyComponent>();
			this.OwnedAlleys = new List<Alley>();
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("e1.7.3.0", 0))
			{
				this.PreferredUpgradeFormation = FormationClass.NumberOfAllFormations;
			}
			if (this._firstName == null)
			{
				this._firstName = this.Name;
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("e1.8.0.0", 0))
			{
				object memberValueBySaveId;
				bool flag;
				bool flag2;
				if ((memberValueBySaveId = objectLoadData.GetMemberValueBySaveId(310)) is bool)
				{
					flag = (bool)memberValueBySaveId;
					flag2 = true;
				}
				else
				{
					flag2 = false;
				}
				this.IsNobleForOldSaves = (flag2 && flag);
			}
		}

		// Token: 0x06000D78 RID: 3448 RVA: 0x00045638 File Offset: 0x00043838
		protected override void PreAfterLoad()
		{
			if (!this._characterObject.IsObsolete)
			{
				Clan supporterOf = this._supporterOf;
				if (supporterOf != null)
				{
					supporterOf.OnSupporterNotableAdded(this);
				}
				if (this._companionOf != null)
				{
					this._companionOf.OnCompanionAdded(this);
				}
				else if (this._clan != null && this._clan.StringId != "neutral" && this.Occupation == Occupation.Lord)
				{
					this._clan.OnLordAdded(this);
				}
				if (this.CurrentSettlement != null && this.PartyBelongedTo == null && this.PartyBelongedToAsPrisoner == null)
				{
					this.CurrentSettlement.AddHeroWithoutParty(this);
				}
			}
			if (MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("v1.1.0", 0) && this.FirstName != null && this.Name != null && this != Hero.MainHero)
			{
				if (this.Name.Attributes == null || !this.Name.Attributes.ContainsKey("FIRSTNAME"))
				{
					this.Name.SetTextVariable("FIRSTNAME", this.FirstName.CopyTextObject());
				}
				if (this.Name.Attributes == null || !this.Name.Attributes.ContainsKey("FEMALE"))
				{
					this.Name.SetTextVariable("FEMALE", this.IsFemale ? 1 : 0);
				}
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion.IsOlderThan(ApplicationVersion.FromString("v1.2.8.31599", 0)) && !this.CharacterObject.IsTemplate && !this.CharacterObject.HiddenInEncyclopedia && this.PartyBelongedTo != null && this.PartyBelongedTo.LeaderHero != this && (this.CharacterObject.Occupation == Occupation.Soldier || this.CharacterObject.Occupation == Occupation.Mercenary || this.CharacterObject.Occupation == Occupation.Bandit || this.CharacterObject.Occupation == Occupation.Gangster || this.CharacterObject.Occupation == Occupation.CaravanGuard || (this.CharacterObject.Occupation == Occupation.Villager && this.CharacterObject.UpgradeTargets.Length != 0)))
			{
				this.PartyBelongedTo.MemberRoster.AddToCounts(this.CharacterObject, -this.PartyBelongedTo.MemberRoster.GetTroopCount(this.CharacterObject), false, 0, 0, true, -1);
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("v1.3.0", 0) && this.IsNoncombatant)
			{
				if (this.BattleEquipment.IsEmpty())
				{
					if (this.Template != null)
					{
						this._battleEquipment = this.Template.FirstBattleEquipment.Clone(false);
					}
					else
					{
						this._battleEquipment = MBEquipmentRosterExtensions.All.Find((MBEquipmentRoster x) => x.StringId == "generic_bat_dummy").AllEquipments.GetRandomElement<Equipment>();
					}
				}
				if (this.CivilianEquipment.IsEmpty())
				{
					if (this.Template != null)
					{
						this._civilianEquipment = this.Template.FirstCivilianEquipment.Clone(false);
					}
					else
					{
						this._civilianEquipment = MBEquipmentRosterExtensions.All.Find((MBEquipmentRoster x) => x.StringId == "generic_civ_dummy").AllEquipments.GetRandomElement<Equipment>();
					}
				}
			}
			this.UpdatePowerModifier();
		}

		// Token: 0x06000D79 RID: 3449 RVA: 0x0004599C File Offset: 0x00043B9C
		private void ClearChangedPerks()
		{
			foreach (PerkObject perkObject in this._heroPerks.GetProperties().ToMBList<PerkObject>())
			{
				if (perkObject == null || perkObject.IsTrash || (float)this.GetSkillValue(perkObject.Skill) < perkObject.RequiredSkillValue)
				{
					this._heroPerks.SetPropertyValue(perkObject, 0);
				}
			}
		}

		// Token: 0x06000D7A RID: 3450 RVA: 0x00045A20 File Offset: 0x00043C20
		protected override void AfterLoad()
		{
			if (this.IsAlive)
			{
				this.ClearChangedPerks();
			}
			HeroDeveloper heroDeveloper = this.HeroDeveloper;
			if (heroDeveloper != null)
			{
				heroDeveloper.AfterLoad();
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion.IsOlderThan(ApplicationVersion.FromString("v1.2.9.35637", 0)) && this.GovernorOf != null && (this.PartyBelongedTo != null || this.PartyBelongedToAsPrisoner != null))
			{
				ChangeGovernorAction.RemoveGovernorOf(this);
			}
			if (MBSaveLoad.LastLoadedGameVersion.IsOlderThan(ApplicationVersion.FromString("v1.2.8.31599", 0)))
			{
				if (this != Hero.MainHero && this.IsPrisoner && this != Hero.MainHero && this.IsPrisoner && this.PartyBelongedToAsPrisoner == null && this.CurrentSettlement != null)
				{
					this.PartyBelongedToAsPrisoner = this.CurrentSettlement.Party;
				}
				MobileParty mainParty = MobileParty.MainParty;
				if (this != Hero.MainHero && this.PartyBelongedTo == mainParty && !mainParty.MemberRoster.Contains(this.CharacterObject))
				{
					MakeHeroFugitiveAction.Apply(this, false);
				}
				if (mainParty.MemberRoster.Contains(this.CharacterObject) && this.PartyBelongedTo != mainParty)
				{
					mainParty.MemberRoster.RemoveTroop(this.CharacterObject, mainParty.MemberRoster.GetElementNumber(this.CharacterObject), default(UniqueTroopDescriptor), 0);
					if (!Campaign.Current.IssueManager.IssueSolvingCompanionList.Contains(this))
					{
						MobileParty partyBelongedTo = this.PartyBelongedTo;
						if (partyBelongedTo != null && !partyBelongedTo.IsCaravan)
						{
							MakeHeroFugitiveAction.Apply(this, false);
						}
					}
				}
				if (this.Spouse != null && (this.Spouse.Clan != this.Clan || this.Clan == null || this.Age < (float)Campaign.Current.Models.AgeModel.HeroComesOfAge))
				{
					Hero spouse = this.Spouse;
					this.Spouse = null;
					this._exSpouses.Remove(spouse);
					spouse._exSpouses.Remove(this);
					MBReadOnlyList<LogEntry> gameActionLogs = Campaign.Current.LogEntryHistory.GameActionLogs;
					for (int i = gameActionLogs.Count - 1; i >= 0; i--)
					{
						CharacterMarriedLogEntry characterMarriedLogEntry;
						if ((characterMarriedLogEntry = (gameActionLogs[i] as CharacterMarriedLogEntry)) != null && (characterMarriedLogEntry.IsVisibleInEncyclopediaPageOf<Hero>(this) || characterMarriedLogEntry.IsVisibleInEncyclopediaPageOf<Hero>(this)))
						{
							Campaign.Current.LogEntryHistory.DeleteLogAtIndex(i);
						}
					}
					Hero hero = this.Mother ?? this.Father;
					if (hero != null)
					{
						this.Clan = hero.Clan;
					}
					else if (this.Age < (float)Campaign.Current.Models.AgeModel.HeroComesOfAge && !this.IsDead)
					{
						KillCharacterAction.ApplyByRemove(this, false, true);
					}
					else
					{
						Clan clan = null;
						int num = int.MaxValue;
						for (int j = 0; j < Clan.All.Count; j++)
						{
							Clan clan2 = Clan.All[j];
							if (clan2 != Clan.PlayerClan && !clan2.IsBanditFaction && !clan2.IsRebelClan && !clan2.IsEliminated && this.Culture == clan2.Culture && clan2.Heroes.Count < num)
							{
								num = clan2.Heroes.Count;
								clan = clan2;
							}
						}
						if (clan == null)
						{
							clan = Clan.All.GetRandomElementWithPredicate((Clan currentClan) => currentClan != Clan.PlayerClan && !currentClan.IsBanditFaction && !currentClan.IsRebelClan && !currentClan.IsEliminated);
						}
						this.Clan = clan;
					}
				}
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("v1.1.1", 0) && !this.IsDead && this.CurrentSettlement == null && this.IsNotable && this.BornSettlement != null)
			{
				TeleportHeroAction.ApplyImmediateTeleportToSettlement(this, this.BornSettlement);
				if (!this.IsActive)
				{
					this.ChangeState(Hero.CharacterStates.Active);
				}
				this.UpdateHomeSettlement();
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion.IsOlderThan(ApplicationVersion.FromString("v1.2.8.31599", 0)) && (!this.CharacterObject.IsTemplate && !this.CharacterObject.HiddenInEncyclopedia && (this.CharacterObject.Occupation == Occupation.Soldier || this.CharacterObject.Occupation == Occupation.Mercenary || this.CharacterObject.Occupation == Occupation.Bandit || this.CharacterObject.Occupation == Occupation.Gangster || this.CharacterObject.Occupation == Occupation.CaravanGuard || (this.CharacterObject.Occupation == Occupation.Villager && this.CharacterObject.UpgradeTargets.Length != 0))))
			{
				if (this.PartyBelongedTo != null)
				{
					if (this.PartyBelongedTo.LeaderHero == this)
					{
						DestroyPartyAction.Apply(null, this.PartyBelongedTo);
					}
					else
					{
						this.PartyBelongedTo.MemberRoster.AddToCounts(this.CharacterObject, -this.PartyBelongedTo.MemberRoster.GetTroopCount(this.CharacterObject), false, 0, 0, true, -1);
					}
				}
				if (this.PartyBelongedToAsPrisoner != null)
				{
					EndCaptivityAction.ApplyByDeath(this);
				}
				if (this.IsAlive)
				{
					KillCharacterAction.ApplyByRemove(this, false, true);
				}
				Campaign.Current.CampaignObjectManager.UnregisterDeadHero(this);
				Campaign.Current.ObjectManager.UnregisterObject(this.CharacterObject);
			}
		}

		// Token: 0x06000D7B RID: 3451 RVA: 0x00045F2C File Offset: 0x0004412C
		public void ChangeState(Hero.CharacterStates newState)
		{
			Hero.CharacterStates heroState = this._heroState;
			this._heroState = newState;
			Clan clan = this._clan;
			if (clan != null)
			{
				clan.OnHeroChangedState(this, heroState);
			}
			Campaign.Current.CampaignObjectManager.HeroStateChanged(this, heroState);
			if (newState == Hero.CharacterStates.Traveling)
			{
				CampaignEventDispatcher.Instance.OnHeroGetsBusy(this, HeroGetsBusyReasons.Traveling);
			}
		}

		// Token: 0x06000D7C RID: 3452 RVA: 0x00045F7B File Offset: 0x0004417B
		public bool IsHealthFull()
		{
			return this.HitPoints >= this.CharacterObject.MaxHitPoints();
		}

		// Token: 0x06000D7D RID: 3453 RVA: 0x00045F94 File Offset: 0x00044194
		private void HealByAmountInternal(int healingAmount, bool addXp = false)
		{
			if (!this.IsHealthFull())
			{
				int num = MathF.Min(healingAmount, this.CharacterObject.MaxHitPoints() - this.HitPoints);
				this.HitPoints += num;
				if (addXp)
				{
					SkillLevelingManager.OnHeroHealedWhileWaiting(this, num);
				}
			}
		}

		// Token: 0x06000D7E RID: 3454 RVA: 0x00045FDC File Offset: 0x000441DC
		public void Heal(int healAmount, bool addXp = false)
		{
			int heroesEffectedHealingAmount = Campaign.Current.Models.PartyHealingModel.GetHeroesEffectedHealingAmount(this, (float)healAmount);
			this.HealByAmountInternal(heroesEffectedHealingAmount, addXp);
		}

		// Token: 0x06000D7F RID: 3455 RVA: 0x0004600C File Offset: 0x0004420C
		public override void Deserialize(MBObjectManager objectManager, XmlNode node)
		{
			base.Deserialize(objectManager, node);
			CharacterObject @object = MBObjectManager.Instance.GetObject<CharacterObject>(base.StringId);
			float age = @object.Age;
			this.SetCharacterObject(@object);
			foreach (ValueTuple<SkillObject, int> valueTuple in Campaign.Current.Models.HeroCreationModel.GetDefaultSkillsForHero(this))
			{
				SkillObject item = valueTuple.Item1;
				int item2 = valueTuple.Item2;
				this.SetSkillValue(item, item2);
			}
			this.StaticBodyProperties = this.CharacterObject.GetBodyPropertiesMin(true).StaticProperties;
			DynamicBodyProperties dynamicBodyProperties = this.CharacterObject.GetBodyPropertiesMin(true).DynamicProperties;
			if (dynamicBodyProperties == DynamicBodyProperties.Invalid)
			{
				dynamicBodyProperties = DynamicBodyProperties.Default;
			}
			this.Weight = dynamicBodyProperties.Weight;
			this.Build = dynamicBodyProperties.Build;
			XmlAttribute xmlAttribute = node.Attributes.get_ItemOf("alive");
			this._heroState = ((xmlAttribute != null && xmlAttribute.Value == "false") ? Hero.CharacterStates.Dead : Hero.CharacterStates.NotSpawned);
			if (this.IsDead)
			{
				HeroHelper.GetRandomDeathDayAndBirthDay((int)age, out this._birthDay, out this._deathDay);
			}
			this.Father = (objectManager.ReadObjectReferenceFromXml("father", typeof(Hero), node) as Hero);
			this.Mother = (objectManager.ReadObjectReferenceFromXml("mother", typeof(Hero), node) as Hero);
			if (this.Spouse == null)
			{
				this.Spouse = (objectManager.ReadObjectReferenceFromXml("spouse", typeof(Hero), node) as Hero);
			}
			Clan clan = objectManager.ReadObjectReferenceFromXml("faction", typeof(Clan), node) as Clan;
			if (clan.StringId != "neutral")
			{
				this.Clan = clan;
			}
			this.EncyclopediaText = ((node.Attributes.get_ItemOf("text") != null) ? new TextObject(node.Attributes.get_ItemOf("text").Value, null) : TextObject.GetEmpty());
			XmlNode xmlNode = node.Attributes.get_ItemOf("preferred_upgrade_formation");
			this.PreferredUpgradeFormation = FormationClass.NumberOfAllFormations;
			FormationClass preferredUpgradeFormation;
			if (xmlNode != null && Enum.TryParse<FormationClass>(xmlNode.InnerText, true, out preferredUpgradeFormation))
			{
				this.PreferredUpgradeFormation = preferredUpgradeFormation;
			}
			ItemObject itemObject = (node.Attributes.get_ItemOf("banner_item") != null) ? MBObjectManager.Instance.GetObject<ItemObject>(node.Attributes.get_ItemOf("banner_item").Value) : null;
			if (itemObject != null)
			{
				this.BannerItem = new EquipmentElement(itemObject, null, null, false);
			}
			this.HeroDeveloper.InitializeHeroDeveloper();
		}

		// Token: 0x06000D80 RID: 3456 RVA: 0x000462C0 File Offset: 0x000444C0
		public bool CanLeadParty()
		{
			bool result = true;
			CampaignEventDispatcher.Instance.CanHeroLeadParty(this, ref result);
			return result;
		}

		// Token: 0x06000D81 RID: 3457 RVA: 0x000462E0 File Offset: 0x000444E0
		public static TextObject SetHeroEncyclopediaTextAndLinks(Hero o)
		{
			StringHelpers.SetCharacterProperties("LORD", o.CharacterObject, null, false);
			MBTextManager.SetTextVariable("TITLE", HeroHelper.GetTitleInIndefiniteCase(o), false);
			MBTextManager.SetTextVariable("REPUTATION", CharacterHelper.GetReputationDescription(o.CharacterObject), false);
			MBTextManager.SetTextVariable("FACTION_NAME", GameTexts.FindText("str_neutral_term_for_culture", o.MapFaction.IsMinorFaction ? o.Culture.StringId : o.MapFaction.Culture.StringId), false);
			if (o.MapFaction.Culture.StringId == "empire")
			{
				MBTextManager.SetTextVariable("FACTION_NAME", "{=empirefaction}Empire", false);
			}
			MBTextManager.SetTextVariable("CLAN_NAME", o.Clan.Name, false);
			if (o.Clan.IsMinorFaction || o.Clan.IsRebelClan)
			{
				if (o.Clan == Hero.MainHero.Clan)
				{
					MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=REWGj2ge}a rising new clan", false);
				}
				else if (o.Clan.IsSect)
				{
					MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=IlRC9Drl}a religious sect", false);
				}
				else if (o.Clan.IsClanTypeMercenary)
				{
					MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=5cH6ssDI}a mercenary company", false);
				}
				else if (o.Clan.IsNomad)
				{
					MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=nt1ra97u}a nomadic clan", false);
				}
				else if (o.Clan.IsMafia)
				{
					MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=EmBEupR5}a secret society", false);
				}
				else
				{
					MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=KZxKVby0}an organization", false);
				}
				if (o != Hero.MainHero)
				{
					return new TextObject("{=9Obe3S6L}{LORD.FIRSTNAME} is a member of the {CLAN_NAME}, {CLAN_DESCRIPTION} from the lands of the {FACTION_NAME}. {?LORD.GENDER}She{?}He{\\?} has the reputation of being {REPUTATION}.", null);
				}
				if (o.GetTraitLevel(DefaultTraits.Mercy) == 0 && o.GetTraitLevel(DefaultTraits.Honor) == 0 && o.GetTraitLevel(DefaultTraits.Generosity) == 0 && o.GetTraitLevel(DefaultTraits.Valor) == 0 && o.GetTraitLevel(DefaultTraits.Calculating) == 0)
				{
					return new TextObject("{=V097rA1v}{LORD.FIRSTNAME} is a head of the {CLAN_NAME}, a rising new clan. {?LORD.GENDER}She{?}He{\\?} is still making {?LORD.GENDER}her{?}his{\\?} reputation.", null);
				}
				return new TextObject("{=hRfXSdlP}{LORD.FIRSTNAME} is a head of the {CLAN_NAME}, {CLAN_DESCRIPTION} from the lands of the {FACTION_NAME}. {?LORD.GENDER}She{?}He{\\?} has the reputation of being {REPUTATION}.", null);
			}
			else
			{
				List<Kingdom> list = (from x in Campaign.Current.Kingdoms
				where x.Culture == o.MapFaction.Culture
				select x).ToList<Kingdom>();
				if (list.Count > 1)
				{
					MBTextManager.SetTextVariable("RULER", o.MapFaction.Leader.Name, false);
				}
				MBTextManager.SetTextVariable("CLAN_DESCRIPTION", "{=KzSeg8ks}a noble family", false);
				if (list.Count == 1)
				{
					if (o.Clan.Leader == o)
					{
						return new TextObject("{=6d4ZTvGv}{LORD.NAME} is {TITLE} of the {FACTION_NAME} and head of the {CLAN_NAME}, {CLAN_DESCRIPTION} of the realm. {?LORD.GENDER}She{?}He{\\?} has the reputation of being {REPUTATION}.", null);
					}
					return new TextObject("{=o5AUljbW}{LORD.NAME} is a member of the {CLAN_NAME}, {CLAN_DESCRIPTION} of the {FACTION_NAME}. {?LORD.GENDER}She{?}He{\\?} has the reputation of being {REPUTATION}.", null);
				}
				else
				{
					if (list.Count <= 1)
					{
						return new TextObject("{=!}Placeholder text", null);
					}
					if (o.Clan.Leader == o)
					{
						return new TextObject("{=JuPUG5wX}{LORD.NAME} is {TITLE} of the {FACTION_NAME} and head of the {CLAN_NAME}, {CLAN_DESCRIPTION} that is backing {RULER} in the civil war. {?LORD.GENDER}She{?}He{\\?} has the reputation of being {REPUTATION}.", null);
					}
					return new TextObject("{=0bPb5btR}{LORD.NAME} is a member of the {CLAN_NAME}, {CLAN_DESCRIPTION} of the {FACTION_NAME} that is backing {RULER} in the civil war. {?LORD.GENDER}She{?}He{\\?} has the reputation of being {REPUTATION}.", null);
				}
			}
		}

		// Token: 0x06000D82 RID: 3458 RVA: 0x00046634 File Offset: 0x00044834
		public bool CanHeroEquipmentBeChanged()
		{
			bool result = true;
			CampaignEventDispatcher.Instance.CanHeroEquipmentBeChanged(this, ref result);
			return result;
		}

		// Token: 0x06000D83 RID: 3459 RVA: 0x00046654 File Offset: 0x00044854
		public bool CanMarry()
		{
			if (!Campaign.Current.Models.MarriageModel.IsSuitableForMarriage(this))
			{
				return false;
			}
			bool result = true;
			CampaignEventDispatcher.Instance.CanHeroMarry(this, ref result);
			return result;
		}

		// Token: 0x06000D84 RID: 3460 RVA: 0x0004668C File Offset: 0x0004488C
		internal void OnDeath()
		{
			this.ClearAttributes();
			this._heroSkills = null;
			this._heroPerks = null;
			this._heroTraits = null;
			this._characterAttributes = null;
			this._heroDeveloper = null;
			this.VolunteerTypes = null;
			this._battleEquipment = null;
			this._civilianEquipment = null;
			this._stealthEquipment = null;
			this.SupporterOf = null;
			this.DeathMarkKillerHero = null;
			this.LastKnownClosestSettlement = null;
		}

		// Token: 0x06000D85 RID: 3461 RVA: 0x000466F4 File Offset: 0x000448F4
		private void SetPartyBelongedTo(MobileParty party)
		{
			if (this._partyBelongedTo != party && this._partyBelongedTo != null)
			{
				if (this._partyBelongedTo.LeaderHero == this)
				{
					this._partyBelongedTo.PartyComponent.ChangePartyLeader(null);
				}
				this._partyBelongedTo.RemoveHeroPartyRole(this);
			}
			this._partyBelongedTo = party;
		}

		// Token: 0x06000D86 RID: 3462 RVA: 0x00046744 File Offset: 0x00044944
		public bool CanBeGovernorOrHavePartyRole()
		{
			if (this.IsPrisoner)
			{
				return false;
			}
			bool result = true;
			CampaignEventDispatcher.Instance.CanBeGovernorOrHavePartyRole(this, ref result);
			return result;
		}

		// Token: 0x06000D87 RID: 3463 RVA: 0x0004676C File Offset: 0x0004496C
		public bool CanDie(KillCharacterAction.KillCharacterActionDetail causeOfDeath)
		{
			if (CampaignOptions.IsLifeDeathCycleDisabled && causeOfDeath == KillCharacterAction.KillCharacterActionDetail.DiedOfOldAge)
			{
				return false;
			}
			bool result = true;
			CampaignEventDispatcher.Instance.CanHeroDie(this, causeOfDeath, ref result);
			return result;
		}

		// Token: 0x06000D88 RID: 3464 RVA: 0x00046798 File Offset: 0x00044998
		public bool CanBecomePrisoner()
		{
			if (!this.IsLord && !this.IsPlayerCompanion && !this.IsSpecial)
			{
				Debug.FailedAssert("Only lords, companions and special quest heroes can become prisoners! Check CanBecomePrisoner usage.", "C:\\BuildAgent\\work\\mb3\\Source\\Bannerlord\\TaleWorlds.CampaignSystem\\Hero.cs", "CanBecomePrisoner", 1828);
				return false;
			}
			if (this != Hero.MainHero)
			{
				return true;
			}
			bool result = true;
			CampaignEventDispatcher.Instance.CanHeroBecomePrisoner(this, ref result);
			return result;
		}

		// Token: 0x06000D89 RID: 3465 RVA: 0x000467F4 File Offset: 0x000449F4
		public bool CanMoveToSettlement()
		{
			bool result = true;
			CampaignEventDispatcher.Instance.CanMoveToSettlement(this, ref result);
			return result;
		}

		// Token: 0x06000D8A RID: 3466 RVA: 0x00046814 File Offset: 0x00044A14
		public bool CanHaveCampaignIssues()
		{
			if (this.Issue != null)
			{
				return false;
			}
			bool result = true;
			CampaignEventDispatcher.Instance.CanHaveCampaignIssues(this, ref result);
			return result;
		}

		// Token: 0x06000D8B RID: 3467 RVA: 0x0004683C File Offset: 0x00044A3C
		public void AddInfluenceWithKingdom(float additionalInfluence)
		{
			float randomFloat = MBRandom.RandomFloat;
			ChangeClanInfluenceAction.Apply(this.Clan, (float)((int)additionalInfluence + ((randomFloat < additionalInfluence - (float)MathF.Floor(additionalInfluence)) ? 1 : 0)));
		}

		// Token: 0x06000D8C RID: 3468 RVA: 0x0004686E File Offset: 0x00044A6E
		public float GetRelationWithPlayer()
		{
			return (float)Hero.MainHero.GetRelation(this);
		}

		// Token: 0x06000D8D RID: 3469 RVA: 0x0004687C File Offset: 0x00044A7C
		public float GetUnmodifiedClanLeaderRelationshipWithPlayer()
		{
			return (float)Hero.MainHero.GetBaseHeroRelation(this);
		}

		// Token: 0x06000D8E RID: 3470 RVA: 0x0004688C File Offset: 0x00044A8C
		public void SetTextVariables()
		{
			MBTextManager.SetTextVariable("SALUTATION_BY_PLAYER", (!CharacterObject.OneToOneConversationCharacter.IsFemale) ? GameTexts.FindText("str_my_lord", null) : GameTexts.FindText("str_my_lady", null), false);
			if (!TextObject.IsNullOrEmpty(this.FirstName))
			{
				MBTextManager.SetTextVariable("FIRST_NAME", this.FirstName, false);
			}
			else
			{
				MBTextManager.SetTextVariable("FIRST_NAME", this.Name, false);
			}
			MBTextManager.SetTextVariable("GENDER", this.IsFemale ? 1 : 0);
		}

		// Token: 0x06000D8F RID: 3471 RVA: 0x0004690F File Offset: 0x00044B0F
		public void SetPersonalRelation(Hero otherHero, int value)
		{
			value = MBMath.ClampInt(value, Campaign.Current.Models.DiplomacyModel.MinRelationLimit, Campaign.Current.Models.DiplomacyModel.MaxRelationLimit);
			CharacterRelationManager.SetHeroRelation(this, otherHero, value);
		}

		// Token: 0x06000D90 RID: 3472 RVA: 0x00046949 File Offset: 0x00044B49
		public int GetRelation(Hero otherHero)
		{
			if (otherHero == this)
			{
				return 0;
			}
			return Campaign.Current.Models.DiplomacyModel.GetEffectiveRelation(this, otherHero);
		}

		// Token: 0x06000D91 RID: 3473 RVA: 0x00046967 File Offset: 0x00044B67
		public int GetBaseHeroRelation(Hero otherHero)
		{
			return Campaign.Current.Models.DiplomacyModel.GetBaseRelation(this, otherHero);
		}

		// Token: 0x06000D92 RID: 3474 RVA: 0x0004697F File Offset: 0x00044B7F
		public bool IsEnemy(Hero otherHero)
		{
			return CharacterRelationManager.GetHeroRelation(this, otherHero) < Campaign.Current.Models.DiplomacyModel.MinNeutralRelationLimit;
		}

		// Token: 0x06000D93 RID: 3475 RVA: 0x0004699E File Offset: 0x00044B9E
		public bool IsFriend(Hero otherHero)
		{
			return CharacterRelationManager.GetHeroRelation(this, otherHero) > Campaign.Current.Models.DiplomacyModel.MaxNeutralRelationLimit;
		}

		// Token: 0x06000D94 RID: 3476 RVA: 0x000469BD File Offset: 0x00044BBD
		public bool IsNeutral(Hero otherHero)
		{
			return !this.IsFriend(otherHero) && !this.IsEnemy(otherHero);
		}

		// Token: 0x06000D95 RID: 3477 RVA: 0x000469D4 File Offset: 0x00044BD4
		public void ModifyHair(int hair, int beard, int tattoo)
		{
			BodyProperties bodyProperties = this.BodyProperties;
			FaceGen.SetHair(ref bodyProperties, hair, beard, tattoo);
			this.StaticBodyProperties = bodyProperties.StaticProperties;
		}

		// Token: 0x17000330 RID: 816
		// (get) Token: 0x06000D96 RID: 3478 RVA: 0x000469FF File Offset: 0x00044BFF
		public MBReadOnlyList<Workshop> OwnedWorkshops
		{
			get
			{
				return this._ownedWorkshops;
			}
		}

		// Token: 0x06000D97 RID: 3479 RVA: 0x00046A07 File Offset: 0x00044C07
		public void AddOwnedWorkshop(Workshop workshop)
		{
			if (!this._ownedWorkshops.Contains(workshop))
			{
				this._ownedWorkshops.Add(workshop);
			}
		}

		// Token: 0x06000D98 RID: 3480 RVA: 0x00046A23 File Offset: 0x00044C23
		public void RemoveOwnedWorkshop(Workshop workshop)
		{
			if (this._ownedWorkshops.Contains(workshop))
			{
				this._ownedWorkshops.Remove(workshop);
			}
		}

		// Token: 0x06000D99 RID: 3481 RVA: 0x00046A40 File Offset: 0x00044C40
		public static Hero FindFirst(Func<Hero, bool> predicate)
		{
			CharacterObject characterObject = Campaign.Current.Characters.FirstOrDefault((CharacterObject x) => x.IsHero && predicate(x.HeroObject));
			if (characterObject == null)
			{
				return null;
			}
			return characterObject.HeroObject;
		}

		// Token: 0x06000D9A RID: 3482 RVA: 0x00046A80 File Offset: 0x00044C80
		public static Hero Find(string stringId)
		{
			return Campaign.Current.CampaignObjectManager.Find<Hero>(stringId);
		}

		// Token: 0x06000D9B RID: 3483 RVA: 0x00046A94 File Offset: 0x00044C94
		public static IEnumerable<Hero> FindAll(Func<Hero, bool> predicate)
		{
			return from x in Campaign.Current.Characters
			where x.IsHero && predicate(x.HeroObject)
			select x.HeroObject;
		}

		// Token: 0x17000331 RID: 817
		// (get) Token: 0x06000D9C RID: 3484 RVA: 0x00046AED File Offset: 0x00044CED
		public static MBReadOnlyList<Hero> AllAliveHeroes
		{
			get
			{
				return Campaign.Current.AliveHeroes;
			}
		}

		// Token: 0x17000332 RID: 818
		// (get) Token: 0x06000D9D RID: 3485 RVA: 0x00046AF9 File Offset: 0x00044CF9
		public static MBReadOnlyList<Hero> DeadOrDisabledHeroes
		{
			get
			{
				return Campaign.Current.DeadOrDisabledHeroes;
			}
		}

		// Token: 0x17000333 RID: 819
		// (get) Token: 0x06000D9E RID: 3486 RVA: 0x00046B05 File Offset: 0x00044D05
		public static Hero MainHero
		{
			get
			{
				return CharacterObject.PlayerCharacter.HeroObject;
			}
		}

		// Token: 0x17000334 RID: 820
		// (get) Token: 0x06000D9F RID: 3487 RVA: 0x00046B11 File Offset: 0x00044D11
		public static Hero OneToOneConversationHero
		{
			get
			{
				return Campaign.Current.ConversationManager.OneToOneConversationHero;
			}
		}

		// Token: 0x17000335 RID: 821
		// (get) Token: 0x06000DA0 RID: 3488 RVA: 0x00046B22 File Offset: 0x00044D22
		public static bool IsMainHeroIll
		{
			get
			{
				return Campaign.Current.MainHeroIllDays != -1;
			}
		}

		// Token: 0x06000DA1 RID: 3489 RVA: 0x00046B34 File Offset: 0x00044D34
		public void MakeWounded(Hero killerHero = null, KillCharacterAction.KillCharacterActionDetail deathMarkDetail = KillCharacterAction.KillCharacterActionDetail.None)
		{
			this.DeathMark = deathMarkDetail;
			this.DeathMarkKillerHero = killerHero;
			this.HitPoints = 1;
		}

		// Token: 0x06000DA2 RID: 3490 RVA: 0x00046B4B File Offset: 0x00044D4B
		public void AddDeathMark(Hero killerHero = null, KillCharacterAction.KillCharacterActionDetail deathMarkDetail = KillCharacterAction.KillCharacterActionDetail.None)
		{
			this.DeathMark = deathMarkDetail;
			this.DeathMarkKillerHero = killerHero;
		}

		// Token: 0x06000DA3 RID: 3491 RVA: 0x00046B5B File Offset: 0x00044D5B
		internal void OnAddedToParty(MobileParty mobileParty)
		{
			this.PartyBelongedTo = mobileParty;
			this.StayingInSettlement = null;
		}

		// Token: 0x06000DA4 RID: 3492 RVA: 0x00046B6B File Offset: 0x00044D6B
		internal void OnRemovedFromParty(MobileParty mobileParty)
		{
			this.PartyBelongedTo = null;
		}

		// Token: 0x06000DA5 RID: 3493 RVA: 0x00046B74 File Offset: 0x00044D74
		internal void OnAddedToPartyAsPrisoner(PartyBase party)
		{
			this.PartyBelongedToAsPrisoner = party;
			this.PartyBelongedTo = null;
		}

		// Token: 0x06000DA6 RID: 3494 RVA: 0x00046B84 File Offset: 0x00044D84
		internal void OnRemovedFromPartyAsPrisoner(PartyBase party)
		{
			this.PartyBelongedToAsPrisoner = null;
		}

		// Token: 0x06000DA7 RID: 3495 RVA: 0x00046B90 File Offset: 0x00044D90
		public Vec3 GetPositionAsVec3()
		{
			return this.GetCampaignPosition().AsVec3();
		}

		// Token: 0x06000DA8 RID: 3496 RVA: 0x00046BAC File Offset: 0x00044DAC
		public CampaignVec2 GetCampaignPosition()
		{
			CampaignVec2 result = CampaignVec2.Invalid;
			if (this.CurrentSettlement != null)
			{
				result = this.CurrentSettlement.GatePosition;
			}
			else if (this.IsPrisoner && this.PartyBelongedToAsPrisoner != null)
			{
				result = (this.PartyBelongedToAsPrisoner.IsSettlement ? this.PartyBelongedToAsPrisoner.Settlement.GatePosition : this.PartyBelongedToAsPrisoner.MobileParty.Position);
			}
			else if (this.PartyBelongedTo != null)
			{
				result = this.PartyBelongedTo.Position;
			}
			return result;
		}

		// Token: 0x06000DA9 RID: 3497 RVA: 0x00046C2C File Offset: 0x00044E2C
		TextObject ITrackableBase.GetName()
		{
			return this.Name;
		}

		// Token: 0x06000DAA RID: 3498 RVA: 0x00046C34 File Offset: 0x00044E34
		Vec3 ITrackableBase.GetPosition()
		{
			return this.GetPositionAsVec3();
		}

		// Token: 0x06000DAB RID: 3499 RVA: 0x00046C3C File Offset: 0x00044E3C
		Banner ITrackableCampaignObject.GetBanner()
		{
			return this.ClanBanner;
		}

		// Token: 0x06000DAC RID: 3500 RVA: 0x00046C44 File Offset: 0x00044E44
		public IMapPoint GetMapPoint()
		{
			if (this.CurrentSettlement != null)
			{
				return this.CurrentSettlement;
			}
			if (!this.IsPrisoner || this.PartyBelongedToAsPrisoner == null)
			{
				return this.PartyBelongedTo;
			}
			if (!this.PartyBelongedToAsPrisoner.IsSettlement)
			{
				return this.PartyBelongedToAsPrisoner.MobileParty;
			}
			return this.PartyBelongedToAsPrisoner.Settlement;
		}

		// Token: 0x06000DAD RID: 3501 RVA: 0x00046CA0 File Offset: 0x00044EA0
		private void SetInitialValuesFromCharacter(CharacterObject characterObject)
		{
			foreach (TraitObject trait in TraitObject.All)
			{
				this.SetTraitLevel(trait, characterObject.GetTraitLevel(trait));
			}
			this.Level = characterObject.Level;
			this.SetName(characterObject.Name, characterObject.Name);
			this.Culture = characterObject.Culture;
			this._defaultAge = characterObject.Age;
			if (this._birthDay == CampaignTime.Zero)
			{
				this._birthDay = HeroHelper.GetRandomBirthDayForAge(this._defaultAge);
			}
			this.HitPoints = characterObject.MaxHitPoints();
			this.IsFemale = characterObject.IsFemale;
			this.Occupation = this.CharacterObject.GetDefaultOccupation();
			List<Equipment> list = (from x in characterObject.BattleEquipments
			where !x.IsEmpty()
			select x).ToList<Equipment>();
			List<Equipment> list2 = (from x in characterObject.CivilianEquipments
			where !x.IsEmpty()
			select x).ToList<Equipment>();
			List<Equipment> list3 = (from x in characterObject.StealthEquipments
			where !x.IsEmpty()
			select x).ToList<Equipment>();
			if (list.IsEmpty<Equipment>())
			{
				CultureObject @object = Game.Current.ObjectManager.GetObject<CultureObject>("neutral_culture");
				list.AddRange(@object.DefaultBattleEquipmentRoster.AllEquipments);
			}
			if (list2.IsEmpty<Equipment>())
			{
				CultureObject object2 = Game.Current.ObjectManager.GetObject<CultureObject>("neutral_culture");
				list2.AddRange(object2.DefaultCivilianEquipmentRoster.AllEquipments);
			}
			if (list3.IsEmpty<Equipment>())
			{
				CultureObject object3 = Game.Current.ObjectManager.GetObject<CultureObject>("neutral_culture");
				list3.AddRange(object3.DefaultStealthEquipmentRoster.AllEquipments);
			}
			if (!list.IsEmpty<Equipment>())
			{
				this._battleEquipment = list.GetRandomElement<Equipment>().Clone(false);
			}
			if (!list2.IsEmpty<Equipment>())
			{
				this._civilianEquipment = list2.GetRandomElement<Equipment>().Clone(false);
			}
			if (!list3.IsEmpty<Equipment>())
			{
				this._stealthEquipment = list3.GetRandomElement<Equipment>().Clone(false);
			}
		}

		// Token: 0x06000DAE RID: 3502 RVA: 0x00046EEC File Offset: 0x000450EC
		public void ResetEquipments()
		{
			this._battleEquipment = this.Template.FirstBattleEquipment.Clone(false);
			this._civilianEquipment = this.Template.FirstCivilianEquipment.Clone(false);
			this._stealthEquipment = this.Template.FirstStealthEquipment.Clone(false);
		}

		// Token: 0x06000DAF RID: 3503 RVA: 0x00046F40 File Offset: 0x00045140
		public void ChangeHeroGold(int changeAmount)
		{
			int gold;
			if (changeAmount > 2147483647 - this._gold)
			{
				gold = int.MaxValue;
			}
			else
			{
				gold = this._gold + changeAmount;
			}
			this.Gold = gold;
		}

		// Token: 0x06000DB0 RID: 3504 RVA: 0x00046F78 File Offset: 0x00045178
		public void CheckInvalidEquipmentsAndReplaceIfNeeded()
		{
			for (int i = 0; i < 12; i++)
			{
				Equipment battleEquipment = this.BattleEquipment;
				if (((battleEquipment != null) ? battleEquipment[i].Item : null) == DefaultItems.Trash)
				{
					this.HandleInvalidItem(true, i);
				}
				else
				{
					Equipment battleEquipment2 = this.BattleEquipment;
					if (((battleEquipment2 != null) ? battleEquipment2[i].Item : null) != null)
					{
						if (!this.BattleEquipment[i].Item.IsReady)
						{
							if (MBObjectManager.Instance.GetObject(this.BattleEquipment[i].Item.Id) == this.BattleEquipment[i].Item)
							{
								MBObjectManager.Instance.UnregisterObject(this.BattleEquipment[i].Item);
							}
							this.HandleInvalidItem(true, i);
							MobileParty partyBelongedTo = this.PartyBelongedTo;
							if (partyBelongedTo != null)
							{
								partyBelongedTo.ItemRoster.AddToCounts(DefaultItems.Trash, 1);
							}
						}
						ItemModifier itemModifier = this.BattleEquipment[i].ItemModifier;
						if (itemModifier != null && !itemModifier.IsReady)
						{
							this.HandleInvalidModifier(true, i);
						}
					}
				}
				Equipment civilianEquipment = this.CivilianEquipment;
				if (((civilianEquipment != null) ? civilianEquipment[i].Item : null) == DefaultItems.Trash)
				{
					this.HandleInvalidItem(false, i);
				}
				else
				{
					Equipment civilianEquipment2 = this.CivilianEquipment;
					if (((civilianEquipment2 != null) ? civilianEquipment2[i].Item : null) != null)
					{
						if (!this.CivilianEquipment[i].Item.IsReady)
						{
							if (MBObjectManager.Instance.GetObject(this.CivilianEquipment[i].Item.Id) == this.CivilianEquipment[i].Item)
							{
								MBObjectManager.Instance.UnregisterObject(this.CivilianEquipment[i].Item);
							}
							this.HandleInvalidItem(false, i);
							MobileParty partyBelongedTo2 = this.PartyBelongedTo;
							if (partyBelongedTo2 != null)
							{
								partyBelongedTo2.ItemRoster.AddToCounts(DefaultItems.Trash, 1);
							}
						}
						ItemModifier itemModifier2 = this.CivilianEquipment[i].ItemModifier;
						if (itemModifier2 != null && !itemModifier2.IsReady)
						{
							this.HandleInvalidModifier(false, i);
						}
					}
				}
			}
		}

		// Token: 0x06000DB1 RID: 3505 RVA: 0x000471C0 File Offset: 0x000453C0
		private void HandleInvalidItem(bool isBattleEquipment, int i)
		{
			if (this.IsHumanPlayerCharacter)
			{
				if (isBattleEquipment)
				{
					this.BattleEquipment[i] = EquipmentElement.Invalid;
					return;
				}
				this.CivilianEquipment[i] = EquipmentElement.Invalid;
				return;
			}
			else
			{
				List<Equipment> list;
				if (!isBattleEquipment)
				{
					list = (from t in this.CharacterObject.CivilianEquipments
					where !t.IsEmpty()
					select t).ToList<Equipment>();
				}
				else
				{
					list = (from t in this.CharacterObject.BattleEquipments
					where !t.IsEmpty()
					select t).ToList<Equipment>();
				}
				List<Equipment> list2 = list;
				EquipmentElement value = list2[this.RandomInt(list2.Count)][i];
				if (value.IsEmpty || !value.Item.IsReady)
				{
					value = EquipmentElement.Invalid;
				}
				if (!isBattleEquipment)
				{
					EquipmentElement equipmentElement = this.CivilianEquipment[i];
				}
				else
				{
					EquipmentElement equipmentElement2 = this.BattleEquipment[i];
				}
				if (isBattleEquipment)
				{
					this.BattleEquipment[i] = value;
					return;
				}
				this.CivilianEquipment[i] = value;
				return;
			}
		}

		// Token: 0x06000DB2 RID: 3506 RVA: 0x000472E0 File Offset: 0x000454E0
		private void HandleInvalidModifier(bool isBattleEquipment, int i)
		{
			if (isBattleEquipment)
			{
				this.BattleEquipment[i] = new EquipmentElement(this.BattleEquipment[i].Item, null, null, false);
				return;
			}
			this.CivilianEquipment[i] = new EquipmentElement(this.CivilianEquipment[i].Item, null, null, false);
		}

		// Token: 0x06000DB3 RID: 3507 RVA: 0x00047341 File Offset: 0x00045541
		internal void ResetClanForOldSave()
		{
			this._clan = null;
		}

		// Token: 0x06000DB4 RID: 3508 RVA: 0x0004734A File Offset: 0x0004554A
		bool ITrackableCampaignObject.get_IsReady()
		{
			return base.IsReady;
		}

		// Token: 0x04000398 RID: 920
		[SaveableField(120)]
		public int LastTimeStampForActivity;

		// Token: 0x04000399 RID: 921
		public const int MaximumNumberOfVolunteers = 6;

		// Token: 0x0400039A RID: 922
		[SaveableField(130)]
		public CharacterObject[] VolunteerTypes;

		// Token: 0x0400039B RID: 923
		[SaveableField(160)]
		private float _passedTimeAtHomeSettlement;

		// Token: 0x0400039C RID: 924
		[SaveableField(170)]
		private CharacterObject _characterObject;

		// Token: 0x0400039D RID: 925
		[SaveableField(180)]
		private TextObject _firstName;

		// Token: 0x0400039E RID: 926
		[SaveableField(181)]
		private TextObject _name;

		// Token: 0x040003A6 RID: 934
		[SaveableField(260)]
		private Hero.CharacterStates _heroState;

		// Token: 0x040003A7 RID: 935
		[SaveableField(270)]
		private PropertyOwner<TraitObject> _heroTraits;

		// Token: 0x040003A8 RID: 936
		[SaveableField(280)]
		private PropertyOwner<PerkObject> _heroPerks;

		// Token: 0x040003A9 RID: 937
		[SaveableField(290)]
		private PropertyOwner<SkillObject> _heroSkills;

		// Token: 0x040003AA RID: 938
		[SaveableField(301)]
		private PropertyOwner<CharacterAttribute> _characterAttributes;

		// Token: 0x040003AB RID: 939
		internal bool IsNobleForOldSaves;

		// Token: 0x040003AD RID: 941
		[SaveableField(370)]
		public int Level;

		// Token: 0x040003AF RID: 943
		[SaveableField(810)]
		public bool HiddenInEncyclopedia;

		// Token: 0x040003B0 RID: 944
		[SaveableField(380)]
		private Clan _companionOf;

		// Token: 0x040003B5 RID: 949
		[SaveableField(430)]
		private int _health;

		// Token: 0x040003B6 RID: 950
		[SaveableField(441)]
		private float _defaultAge;

		// Token: 0x040003B7 RID: 951
		[SaveableField(440)]
		private CampaignTime _birthDay;

		// Token: 0x040003B8 RID: 952
		[SaveableField(450)]
		private CampaignTime _deathDay;

		// Token: 0x040003B9 RID: 953
		[SaveableField(460)]
		private float _power;

		// Token: 0x040003BB RID: 955
		[SaveableField(500)]
		private Clan _clan;

		// Token: 0x040003BC RID: 956
		[SaveableField(510)]
		private Clan _supporterOf;

		// Token: 0x040003BD RID: 957
		[SaveableField(520)]
		private Town _governorOf;

		// Token: 0x040003BE RID: 958
		[SaveableField(530)]
		private MBList<Workshop> _ownedWorkshops = new MBList<Workshop>();

		// Token: 0x040003C0 RID: 960
		[SaveableField(551)]
		public CultureObject Culture;

		// Token: 0x040003C2 RID: 962
		[XmlIgnore]
		[SaveableField(560)]
		private MobileParty _partyBelongedTo;

		// Token: 0x040003C4 RID: 964
		[SaveableField(580)]
		private Settlement _stayingInSettlement;

		// Token: 0x040003C5 RID: 965
		[SaveableField(590)]
		public MBList<ItemObject> SpecialItems;

		// Token: 0x040003C6 RID: 966
		[SaveableField(412)]
		private bool _isKnownToPlayer;

		// Token: 0x040003C7 RID: 967
		[SaveableField(610)]
		private bool _hasMet;

		// Token: 0x040003C9 RID: 969
		[SaveableField(630)]
		private Settlement _bornSettlement;

		// Token: 0x040003CA RID: 970
		[CachedData]
		private Settlement _homeSettlement;

		// Token: 0x040003CB RID: 971
		[CachedData]
		private float _powerModifier = -1f;

		// Token: 0x040003CC RID: 972
		[SaveableField(650)]
		private int _gold;

		// Token: 0x040003CE RID: 974
		[SaveableField(700)]
		private Hero _father;

		// Token: 0x040003CF RID: 975
		[SaveableField(710)]
		private Hero _mother;

		// Token: 0x040003D0 RID: 976
		[SaveableField(720)]
		private readonly MBList<Hero> _exSpouses = new MBList<Hero>();

		// Token: 0x040003D1 RID: 977
		[SaveableField(730)]
		private Hero _spouse;

		// Token: 0x040003D2 RID: 978
		[SaveableField(740)]
		private readonly MBList<Hero> _children = new MBList<Hero>();

		// Token: 0x040003D3 RID: 979
		[SaveableField(760)]
		public bool IsPregnant;

		// Token: 0x040003D4 RID: 980
		[SaveableField(770)]
		private HeroDeveloper _heroDeveloper;

		// Token: 0x02000524 RID: 1316
		public enum CharacterStates
		{
			// Token: 0x040015CD RID: 5581
			NotSpawned,
			// Token: 0x040015CE RID: 5582
			Active,
			// Token: 0x040015CF RID: 5583
			Fugitive,
			// Token: 0x040015D0 RID: 5584
			Prisoner,
			// Token: 0x040015D1 RID: 5585
			Released,
			// Token: 0x040015D2 RID: 5586
			Dead,
			// Token: 0x040015D3 RID: 5587
			Disabled,
			// Token: 0x040015D4 RID: 5588
			Traveling
		}
	}
}
